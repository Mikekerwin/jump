{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * useGameLoop Hook\n *\n * Main game loop that orchestrates all game systems\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { PlayerPhysics } from '../systems/playerPhysics';\nimport { LaserPhysics } from '../systems/laserPhysics';\nimport { AudioManager, setupAudioUnlock } from '../systems/audioManager';\nimport { BackgroundStars } from '../systems/backgroundStars';\nimport { BALL_SIZE, HITBOX_SIZE, PLAYER_X_POSITION, FLOOR_Y_POSITION, ENEMY_X_POSITION, SCORE_UPDATE_INTERVAL, PLAYER_PROJECTILE_SPEED, PLAYER_PROJECTILE_WIDTH, PLAYER_PROJECTILE_HEIGHT, ENEMY_WIDTH_GROWTH_PER_CYCLE, ENEMY_HEIGHT_GROWTH_PER_CYCLE } from '../config/gameConfig';\nexport const useGameLoop = () => {\n  _s();\n  // Game state\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [playerState, setPlayerState] = useState({\n    position: {\n      x: 0,\n      y: 0\n    },\n    velocity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    hasJumped: false,\n    isHolding: false,\n    holdStartTime: 0\n  });\n  const [lasers, setLasers] = useState([]);\n  const [enemyY, setEnemyY] = useState(0);\n  const [enemyScale, setEnemyScale] = useState({\n    scaleX: 1,\n    scaleY: 1\n  });\n  const [numLasers, setNumLasers] = useState(1);\n  const [wasHit, setWasHit] = useState(false);\n  const [playerProjectiles, setPlayerProjectiles] = useState([]);\n  const [hitCount, setHitCount] = useState(0); // Track hits on enemy ball\n  const [enemyWasHit, setEnemyWasHit] = useState(false); // Track when enemy gets hit by player projectile\n  const [enemyGrowthLevel, setEnemyGrowthLevel] = useState(0); // Track how many times enemy has grown\n\n  // Game systems\n  const playerPhysicsRef = useRef(null);\n  const laserPhysicsRef = useRef(null);\n  const audioManagerRef = useRef(null);\n  const backgroundStarsRef = useRef(null);\n\n  // Score tracking\n  const scoreRef = useRef(0);\n\n  // Dimensions\n  const dimensionsRef = useRef({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    centerY: window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2,\n    playerStartX: window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2,\n    enemyX: window.innerWidth * ENEMY_X_POSITION - BALL_SIZE\n  });\n\n  /**\n   * Initialize game systems\n   */\n  useEffect(() => {\n    const dims = dimensionsRef.current;\n\n    // Initialize physics systems\n    playerPhysicsRef.current = new PlayerPhysics(dims.playerStartX, dims.centerY, dims.centerY);\n    laserPhysicsRef.current = new LaserPhysics(dims.width, dims.height, dims.centerY, dims.enemyX);\n\n    // Initialize audio\n    audioManagerRef.current = new AudioManager();\n    const cleanupAudio = setupAudioUnlock(audioManagerRef.current);\n\n    // Initialize background\n    backgroundStarsRef.current = new BackgroundStars(dims.width, dims.height);\n\n    // Set initial states\n    setPlayerState(playerPhysicsRef.current.getState());\n    setLasers(laserPhysicsRef.current.getLasers());\n    setEnemyY(laserPhysicsRef.current.getEnemyY());\n    return () => {\n      var _audioManagerRef$curr;\n      cleanupAudio();\n      (_audioManagerRef$curr = audioManagerRef.current) === null || _audioManagerRef$curr === void 0 ? void 0 : _audioManagerRef$curr.dispose();\n    };\n  }, []);\n\n  /**\n   * Update score display periodically\n   */\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setScore(scoreRef.current);\n    }, SCORE_UPDATE_INTERVAL);\n    return () => clearInterval(interval);\n  }, []);\n\n  /**\n   * Handle window resize\n   */\n  useEffect(() => {\n    const handleResize = () => {\n      var _playerPhysicsRef$cur, _laserPhysicsRef$curr, _backgroundStarsRef$c;\n      const dims = dimensionsRef.current;\n      dims.width = window.innerWidth;\n      dims.height = window.innerHeight;\n      dims.centerY = window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2;\n      dims.playerStartX = window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2;\n      dims.enemyX = window.innerWidth * ENEMY_X_POSITION - BALL_SIZE;\n      (_playerPhysicsRef$cur = playerPhysicsRef.current) === null || _playerPhysicsRef$cur === void 0 ? void 0 : _playerPhysicsRef$cur.updateCenterY(dims.centerY);\n      (_laserPhysicsRef$curr = laserPhysicsRef.current) === null || _laserPhysicsRef$curr === void 0 ? void 0 : _laserPhysicsRef$curr.updateDimensions(dims.width, dims.height, dims.centerY, dims.enemyX);\n      (_backgroundStarsRef$c = backgroundStarsRef.current) === null || _backgroundStarsRef$c === void 0 ? void 0 : _backgroundStarsRef$c.updateDimensions(dims.width, dims.height);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  /**\n   * Main game loop\n   */\n  useEffect(() => {\n    if (gameOver) return;\n    let animationFrameId;\n    const loop = () => {\n      var _backgroundStarsRef$c2, _laserPhysicsRef$curr2, _laserPhysicsRef$curr3, _playerPhysicsRef$cur2, _laserPhysicsRef$curr4, _playerPhysicsRef$cur4, _laserPhysicsRef$curr6;\n      // Update background\n      (_backgroundStarsRef$c2 = backgroundStarsRef.current) === null || _backgroundStarsRef$c2 === void 0 ? void 0 : _backgroundStarsRef$c2.update();\n\n      // Update laser count based on score\n      (_laserPhysicsRef$curr2 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr2 === void 0 ? void 0 : _laserPhysicsRef$curr2.updateLaserCount(scoreRef.current);\n      setNumLasers(((_laserPhysicsRef$curr3 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr3 === void 0 ? void 0 : _laserPhysicsRef$curr3.getNumLasers()) || 1);\n\n      // Update player physics\n      const newPlayerState = (_playerPhysicsRef$cur2 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur2 === void 0 ? void 0 : _playerPhysicsRef$cur2.update();\n      if (newPlayerState) {\n        var _playerPhysicsRef$cur3;\n        setPlayerState(newPlayerState);\n\n        // Check if bounce sound should play\n        if ((_playerPhysicsRef$cur3 = playerPhysicsRef.current) !== null && _playerPhysicsRef$cur3 !== void 0 && _playerPhysicsRef$cur3.shouldPlayBounceSound()) {\n          var _audioManagerRef$curr2;\n          const volume = playerPhysicsRef.current.getBounceVolume();\n          (_audioManagerRef$curr2 = audioManagerRef.current) === null || _audioManagerRef$curr2 === void 0 ? void 0 : _audioManagerRef$curr2.playBounce(volume);\n        }\n      }\n\n      // Update lasers\n      const laserUpdate = (_laserPhysicsRef$curr4 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr4 === void 0 ? void 0 : _laserPhysicsRef$curr4.update(scoreRef.current, (newPlayerState === null || newPlayerState === void 0 ? void 0 : newPlayerState.position) || {\n        x: 0,\n        y: 0\n      }, ((_playerPhysicsRef$cur4 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur4 === void 0 ? void 0 : _playerPhysicsRef$cur4.hasPlayerJumped()) || false);\n      if (laserUpdate && laserPhysicsRef.current) {\n        // Update score\n        scoreRef.current += laserUpdate.scoreChange;\n\n        // Check for hit\n        if (laserUpdate.wasHit) {\n          var _audioManagerRef$curr3;\n          setWasHit(true);\n          (_audioManagerRef$curr3 = audioManagerRef.current) === null || _audioManagerRef$curr3 === void 0 ? void 0 : _audioManagerRef$curr3.playLaserHit(); // Play laser hit sound\n          setTimeout(() => setWasHit(false), 250);\n        }\n\n        // Update enemy position and scale (now handled internally by LaserPhysics)\n        setEnemyY(laserPhysicsRef.current.getEnemyY());\n        setEnemyScale(laserPhysicsRef.current.getEnemyScale());\n\n        // Update laser positions\n        setLasers(laserPhysicsRef.current.getLasers());\n      }\n\n      // Update player projectiles (score 200+)\n      if (scoreRef.current >= 100) {\n        setPlayerProjectiles(prev => {\n          return prev.map(projectile => {\n            var _laserPhysicsRef$curr5;\n            if (!projectile.active) return projectile;\n\n            // Move projectile to the right\n            const newX = projectile.x + PLAYER_PROJECTILE_SPEED;\n\n            // Check collision with enemy ball\n            const dims = dimensionsRef.current;\n            const currentEnemyWidth = BALL_SIZE + enemyGrowthLevel * ENEMY_WIDTH_GROWTH_PER_CYCLE;\n            const currentEnemyHeight = BALL_SIZE + enemyGrowthLevel * ENEMY_HEIGHT_GROWTH_PER_CYCLE;\n            const enemyCurrentY = ((_laserPhysicsRef$curr5 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr5 === void 0 ? void 0 : _laserPhysicsRef$curr5.getEnemyY()) || 0;\n            const hitEnemy = newX + PLAYER_PROJECTILE_WIDTH > dims.enemyX && newX < dims.enemyX + currentEnemyWidth && projectile.y + PLAYER_PROJECTILE_HEIGHT > enemyCurrentY && projectile.y < enemyCurrentY + currentEnemyHeight;\n            if (hitEnemy) {\n              var _audioManagerRef$curr4;\n              // Hit detected! Increment hit counter and trigger visual/audio feedback\n              setHitCount(prevHit => {\n                const newHitCount = prevHit + 1;\n                if (newHitCount >= 20) {\n                  setEnemyGrowthLevel(prevGrowth => prevGrowth + 1);\n                  return 0; // Reset hit counter\n                }\n                return newHitCount;\n              });\n              setEnemyWasHit(true);\n              (_audioManagerRef$curr4 = audioManagerRef.current) === null || _audioManagerRef$curr4 === void 0 ? void 0 : _audioManagerRef$curr4.playLaserHit(); // Play same hit sound\n              setTimeout(() => setEnemyWasHit(false), 250); // Flash for 250ms\n              return {\n                ...projectile,\n                active: false\n              };\n            }\n\n            // Deactivate if off screen\n            if (newX > dims.width) {\n              return {\n                ...projectile,\n                active: false\n              };\n            }\n            return {\n              ...projectile,\n              x: newX\n            };\n          }).filter(p => p.active); // Remove inactive projectiles\n        });\n      }\n\n      // Pass enemy growth level to the physics system\n      (_laserPhysicsRef$curr6 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr6 === void 0 ? void 0 : _laserPhysicsRef$curr6.setEnemyGrowthLevel(enemyGrowthLevel);\n\n      // Check game over\n      if (scoreRef.current < 0) {\n        setGameOver(true);\n        return;\n      }\n      animationFrameId = requestAnimationFrame(loop);\n    };\n    animationFrameId = requestAnimationFrame(loop);\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [gameOver]);\n\n  /**\n   * Handle jump start\n   */\n  const handleJumpStart = useCallback(() => {\n    var _audioManagerRef$curr5, _audioManagerRef$curr6, _playerPhysicsRef$cur5;\n    if (gameOver) return;\n\n    // Initialize audio on first interaction\n    (_audioManagerRef$curr5 = audioManagerRef.current) === null || _audioManagerRef$curr5 === void 0 ? void 0 : _audioManagerRef$curr5.initialize();\n    // Play jump sound only once per press\n    (_audioManagerRef$curr6 = audioManagerRef.current) === null || _audioManagerRef$curr6 === void 0 ? void 0 : _audioManagerRef$curr6.playJumpSound();\n    (_playerPhysicsRef$cur5 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur5 === void 0 ? void 0 : _playerPhysicsRef$cur5.startJump();\n  }, [gameOver]);\n\n  /**\n   * Handle jump end\n   */\n  const handleJumpEnd = useCallback(() => {\n    var _playerPhysicsRef$cur6, _audioManagerRef$curr7;\n    if (gameOver) return;\n    (_playerPhysicsRef$cur6 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur6 === void 0 ? void 0 : _playerPhysicsRef$cur6.endJump();\n    // Reset jump sound flag so it can play again on next press\n    (_audioManagerRef$curr7 = audioManagerRef.current) === null || _audioManagerRef$curr7 === void 0 ? void 0 : _audioManagerRef$curr7.resetJumpSound();\n  }, [gameOver]);\n\n  /**\n   * Handle mouse/trackpad movement\n   */\n  const handleMouseMove = useCallback(event => {\n    var _playerPhysicsRef$cur7;\n    if (gameOver) return;\n    const dims = dimensionsRef.current;\n    (_playerPhysicsRef$cur7 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur7 === void 0 ? void 0 : _playerPhysicsRef$cur7.setMousePosition(event.clientX, dims.width);\n  }, [gameOver]);\n\n  /**\n   * Handle touch movement (iPad/mobile)\n   */\n  const handleTouchMove = useCallback(event => {\n    if (gameOver) return;\n    if (event.touches.length > 0) {\n      var _playerPhysicsRef$cur8;\n      const dims = dimensionsRef.current;\n      const touch = event.touches[0];\n      (_playerPhysicsRef$cur8 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur8 === void 0 ? void 0 : _playerPhysicsRef$cur8.setMousePosition(touch.clientX, dims.width);\n    }\n  }, [gameOver]);\n\n  /**\n   * Handle shooting (score 200+, triggered by 'S' key or double-tap)\n   */\n  const handleShoot = useCallback(() => {\n    var _playerPhysicsRef$cur9;\n    if (gameOver || scoreRef.current < 100) return;\n    const currentPlayerState = (_playerPhysicsRef$cur9 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur9 === void 0 ? void 0 : _playerPhysicsRef$cur9.getState();\n    if (!currentPlayerState) return;\n\n    // Create projectile from center of player ball\n    const newProjectile = {\n      x: currentPlayerState.position.x + BALL_SIZE / 2,\n      y: currentPlayerState.position.y + BALL_SIZE / 2 - PLAYER_PROJECTILE_HEIGHT / 2,\n      active: true\n    };\n    setPlayerProjectiles(prev => [...prev, newProjectile]);\n  }, [gameOver]);\n\n  /**\n   * Adds 75 points for testing purposes.\n   */\n  const handleTestScore = useCallback(() => {\n    var _laserPhysicsRef$curr7;\n    scoreRef.current += 75;\n    (_laserPhysicsRef$curr7 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr7 === void 0 ? void 0 : _laserPhysicsRef$curr7.setScore(scoreRef.current);\n  }, []);\n\n  /**\n   * Restart game\n   */\n  const handleRestart = useCallback(() => {\n    var _playerPhysicsRef$cur0, _laserPhysicsRef$curr8, _backgroundStarsRef$c3, _playerPhysicsRef$cur1, _laserPhysicsRef$curr9, _laserPhysicsRef$curr0;\n    const dims = dimensionsRef.current;\n\n    // Reset score\n    scoreRef.current = 0;\n    setScore(0);\n\n    // Reset systems\n    (_playerPhysicsRef$cur0 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur0 === void 0 ? void 0 : _playerPhysicsRef$cur0.reset(dims.playerStartX, dims.centerY);\n    (_laserPhysicsRef$curr8 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr8 === void 0 ? void 0 : _laserPhysicsRef$curr8.reset();\n    (_backgroundStarsRef$c3 = backgroundStarsRef.current) === null || _backgroundStarsRef$c3 === void 0 ? void 0 : _backgroundStarsRef$c3.reset();\n\n    // Reset state\n    setPlayerState(((_playerPhysicsRef$cur1 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur1 === void 0 ? void 0 : _playerPhysicsRef$cur1.getState()) || playerState);\n    setLasers(((_laserPhysicsRef$curr9 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr9 === void 0 ? void 0 : _laserPhysicsRef$curr9.getLasers()) || []);\n    setEnemyY(((_laserPhysicsRef$curr0 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr0 === void 0 ? void 0 : _laserPhysicsRef$curr0.getEnemyY()) || dims.centerY);\n    setNumLasers(1);\n    setGameOver(false);\n    setWasHit(false);\n    setEnemyWasHit(false);\n    setPlayerProjectiles([]);\n    setHitCount(0);\n    setEnemyGrowthLevel(0);\n  }, [playerState]);\n  return {\n    // State\n    score,\n    gameOver,\n    hitCount,\n    enemyWasHit,\n    playerState,\n    lasers,\n    enemyY,\n    enemyScale,\n    numLasers,\n    wasHit,\n    playerProjectiles,\n    dimensions: dimensionsRef.current,\n    // Systems\n    backgroundStars: backgroundStarsRef.current,\n    // Handlers\n    handleJumpStart,\n    handleJumpEnd,\n    handleMouseMove,\n    handleTouchMove,\n    handleShoot,\n    handleRestart,\n    handleTestScore\n  };\n};\n_s(useGameLoop, \"s3Y8UQSCpJYtatmZhKNgfsAV+ho=\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","PlayerPhysics","LaserPhysics","AudioManager","setupAudioUnlock","BackgroundStars","BALL_SIZE","HITBOX_SIZE","PLAYER_X_POSITION","FLOOR_Y_POSITION","ENEMY_X_POSITION","SCORE_UPDATE_INTERVAL","PLAYER_PROJECTILE_SPEED","PLAYER_PROJECTILE_WIDTH","PLAYER_PROJECTILE_HEIGHT","ENEMY_WIDTH_GROWTH_PER_CYCLE","ENEMY_HEIGHT_GROWTH_PER_CYCLE","useGameLoop","_s","score","setScore","gameOver","setGameOver","playerState","setPlayerState","position","x","y","velocity","scaleX","scaleY","hasJumped","isHolding","holdStartTime","lasers","setLasers","enemyY","setEnemyY","enemyScale","setEnemyScale","numLasers","setNumLasers","wasHit","setWasHit","playerProjectiles","setPlayerProjectiles","hitCount","setHitCount","enemyWasHit","setEnemyWasHit","enemyGrowthLevel","setEnemyGrowthLevel","playerPhysicsRef","laserPhysicsRef","audioManagerRef","backgroundStarsRef","scoreRef","dimensionsRef","width","window","innerWidth","height","innerHeight","centerY","playerStartX","enemyX","dims","current","cleanupAudio","getState","getLasers","getEnemyY","_audioManagerRef$curr","dispose","interval","setInterval","clearInterval","handleResize","_playerPhysicsRef$cur","_laserPhysicsRef$curr","_backgroundStarsRef$c","updateCenterY","updateDimensions","addEventListener","removeEventListener","animationFrameId","loop","_backgroundStarsRef$c2","_laserPhysicsRef$curr2","_laserPhysicsRef$curr3","_playerPhysicsRef$cur2","_laserPhysicsRef$curr4","_playerPhysicsRef$cur4","_laserPhysicsRef$curr6","update","updateLaserCount","getNumLasers","newPlayerState","_playerPhysicsRef$cur3","shouldPlayBounceSound","_audioManagerRef$curr2","volume","getBounceVolume","playBounce","laserUpdate","hasPlayerJumped","scoreChange","_audioManagerRef$curr3","playLaserHit","setTimeout","getEnemyScale","prev","map","projectile","_laserPhysicsRef$curr5","active","newX","currentEnemyWidth","currentEnemyHeight","enemyCurrentY","hitEnemy","_audioManagerRef$curr4","prevHit","newHitCount","prevGrowth","filter","p","requestAnimationFrame","cancelAnimationFrame","handleJumpStart","_audioManagerRef$curr5","_audioManagerRef$curr6","_playerPhysicsRef$cur5","initialize","playJumpSound","startJump","handleJumpEnd","_playerPhysicsRef$cur6","_audioManagerRef$curr7","endJump","resetJumpSound","handleMouseMove","event","_playerPhysicsRef$cur7","setMousePosition","clientX","handleTouchMove","touches","length","_playerPhysicsRef$cur8","touch","handleShoot","_playerPhysicsRef$cur9","currentPlayerState","newProjectile","handleTestScore","_laserPhysicsRef$curr7","handleRestart","_playerPhysicsRef$cur0","_laserPhysicsRef$curr8","_backgroundStarsRef$c3","_playerPhysicsRef$cur1","_laserPhysicsRef$curr9","_laserPhysicsRef$curr0","reset","dimensions","backgroundStars"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/hooks/useGameLoop.ts"],"sourcesContent":["/**\n * useGameLoop Hook\n *\n * Main game loop that orchestrates all game systems\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { PlayerPhysics } from '../systems/playerPhysics';\nimport { LaserPhysics } from '../systems/laserPhysics';\nimport { AudioManager, setupAudioUnlock } from '../systems/audioManager';\nimport { BackgroundStars } from '../systems/backgroundStars';\nimport { PlayerState, LaserState, PlayerProjectile } from '../types/game';\nimport {\n  BALL_SIZE,\n  HITBOX_SIZE,\n  PLAYER_X_POSITION,\n  FLOOR_Y_POSITION,\n  ENEMY_X_POSITION,\n  SCORE_UPDATE_INTERVAL,\n  PLAYER_PROJECTILE_SPEED,\n  PLAYER_PROJECTILE_WIDTH,\n  PLAYER_PROJECTILE_HEIGHT,\n  ENEMY_WIDTH_GROWTH_PER_CYCLE,\n  ENEMY_HEIGHT_GROWTH_PER_CYCLE,\n} from '../config/gameConfig';\n\nexport const useGameLoop = () => {\n  // Game state\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [playerState, setPlayerState] = useState<PlayerState>({\n    position: { x: 0, y: 0 },\n    velocity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    hasJumped: false,\n    isHolding: false,\n    holdStartTime: 0,\n  });\n  const [lasers, setLasers] = useState<LaserState[]>([]);\n  const [enemyY, setEnemyY] = useState(0);\n  const [enemyScale, setEnemyScale] = useState({ scaleX: 1, scaleY: 1 });\n  const [numLasers, setNumLasers] = useState(1);\n  const [wasHit, setWasHit] = useState(false);\n  const [playerProjectiles, setPlayerProjectiles] = useState<PlayerProjectile[]>([]);\n  const [hitCount, setHitCount] = useState(0); // Track hits on enemy ball\n  const [enemyWasHit, setEnemyWasHit] = useState(false); // Track when enemy gets hit by player projectile\n  const [enemyGrowthLevel, setEnemyGrowthLevel] = useState(0); // Track how many times enemy has grown\n\n  // Game systems\n  const playerPhysicsRef = useRef<PlayerPhysics | null>(null);\n  const laserPhysicsRef = useRef<LaserPhysics | null>(null);\n  const audioManagerRef = useRef<AudioManager | null>(null);\n  const backgroundStarsRef = useRef<BackgroundStars | null>(null);\n\n  // Score tracking\n  const scoreRef = useRef(0);\n\n  // Dimensions\n  const dimensionsRef = useRef({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    centerY: window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2,\n    playerStartX: window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2,\n    enemyX: window.innerWidth * ENEMY_X_POSITION - BALL_SIZE,\n  });\n\n  /**\n   * Initialize game systems\n   */\n  useEffect(() => {\n    const dims = dimensionsRef.current;\n\n    // Initialize physics systems\n    playerPhysicsRef.current = new PlayerPhysics(\n      dims.playerStartX,\n      dims.centerY,\n      dims.centerY\n    );\n\n    laserPhysicsRef.current = new LaserPhysics(\n      dims.width,\n      dims.height,\n      dims.centerY,\n      dims.enemyX\n    );\n\n    // Initialize audio\n    audioManagerRef.current = new AudioManager();\n    const cleanupAudio = setupAudioUnlock(audioManagerRef.current);\n\n    // Initialize background\n    backgroundStarsRef.current = new BackgroundStars(dims.width, dims.height);\n\n    // Set initial states\n    setPlayerState(playerPhysicsRef.current.getState());\n    setLasers(laserPhysicsRef.current.getLasers());\n    setEnemyY(laserPhysicsRef.current.getEnemyY());\n\n    return () => {\n      cleanupAudio();\n      audioManagerRef.current?.dispose();\n    };\n  }, []);\n\n  /**\n   * Update score display periodically\n   */\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setScore(scoreRef.current);\n    }, SCORE_UPDATE_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  /**\n   * Handle window resize\n   */\n  useEffect(() => {\n    const handleResize = () => {\n      const dims = dimensionsRef.current;\n      dims.width = window.innerWidth;\n      dims.height = window.innerHeight;\n      dims.centerY = window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2;\n      dims.playerStartX = window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2;\n      dims.enemyX = window.innerWidth * ENEMY_X_POSITION - BALL_SIZE;\n\n      playerPhysicsRef.current?.updateCenterY(dims.centerY);\n      laserPhysicsRef.current?.updateDimensions(dims.width, dims.height, dims.centerY, dims.enemyX);\n      backgroundStarsRef.current?.updateDimensions(dims.width, dims.height);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  /**\n   * Main game loop\n   */\n  useEffect(() => {\n    if (gameOver) return;\n\n    let animationFrameId: number;\n\n    const loop = () => {\n      // Update background\n      backgroundStarsRef.current?.update();\n\n      // Update laser count based on score\n      laserPhysicsRef.current?.updateLaserCount(scoreRef.current);\n      setNumLasers(laserPhysicsRef.current?.getNumLasers() || 1);\n\n      // Update player physics\n      const newPlayerState = playerPhysicsRef.current?.update();\n      if (newPlayerState) {\n        setPlayerState(newPlayerState);\n\n        // Check if bounce sound should play\n        if (playerPhysicsRef.current?.shouldPlayBounceSound()) {\n          const volume = playerPhysicsRef.current.getBounceVolume();\n          audioManagerRef.current?.playBounce(volume);\n        }\n      }\n\n      // Update lasers\n      const laserUpdate = laserPhysicsRef.current?.update(\n        scoreRef.current,\n        newPlayerState?.position || { x: 0, y: 0 },\n        playerPhysicsRef.current?.hasPlayerJumped() || false\n      );\n\n      if (laserUpdate && laserPhysicsRef.current) {\n        // Update score\n        scoreRef.current += laserUpdate.scoreChange;\n\n        // Check for hit\n        if (laserUpdate.wasHit) {\n          setWasHit(true);\n          audioManagerRef.current?.playLaserHit(); // Play laser hit sound\n          setTimeout(() => setWasHit(false), 250);\n        }\n\n        // Update enemy position and scale (now handled internally by LaserPhysics)\n        setEnemyY(laserPhysicsRef.current.getEnemyY());\n        setEnemyScale(laserPhysicsRef.current.getEnemyScale());\n\n          // Update laser positions\n        setLasers(laserPhysicsRef.current.getLasers());\n      }\n\n      // Update player projectiles (score 200+)\n      if (scoreRef.current >= 100) {\n        setPlayerProjectiles((prev) => {\n          return prev\n            .map((projectile) => {\n              if (!projectile.active) return projectile;\n\n              // Move projectile to the right\n              const newX = projectile.x + PLAYER_PROJECTILE_SPEED;\n\n              // Check collision with enemy ball\n              const dims = dimensionsRef.current;\n              const currentEnemyWidth = BALL_SIZE + (enemyGrowthLevel * ENEMY_WIDTH_GROWTH_PER_CYCLE);\n              const currentEnemyHeight = BALL_SIZE + (enemyGrowthLevel * ENEMY_HEIGHT_GROWTH_PER_CYCLE);\n              const enemyCurrentY = laserPhysicsRef.current?.getEnemyY() || 0;\n              const hitEnemy =\n                newX + PLAYER_PROJECTILE_WIDTH > dims.enemyX &&\n                newX < dims.enemyX + currentEnemyWidth &&\n                projectile.y + PLAYER_PROJECTILE_HEIGHT > enemyCurrentY &&\n                projectile.y < enemyCurrentY + currentEnemyHeight;\n\n              if (hitEnemy) {\n                // Hit detected! Increment hit counter and trigger visual/audio feedback\n                setHitCount((prevHit) => {\n                  const newHitCount = prevHit + 1;\n                  if (newHitCount >= 20) {\n                    setEnemyGrowthLevel((prevGrowth) => prevGrowth + 1);\n                    return 0; // Reset hit counter\n                  }\n                  return newHitCount;\n                });\n                setEnemyWasHit(true);\n                audioManagerRef.current?.playLaserHit(); // Play same hit sound\n                setTimeout(() => setEnemyWasHit(false), 250); // Flash for 250ms\n                return { ...projectile, active: false };\n              }\n\n              // Deactivate if off screen\n              if (newX > dims.width) {\n                return { ...projectile, active: false };\n              }\n\n              return { ...projectile, x: newX };\n            })\n            .filter((p) => p.active); // Remove inactive projectiles\n        });\n      }\n\n      // Pass enemy growth level to the physics system\n      laserPhysicsRef.current?.setEnemyGrowthLevel(enemyGrowthLevel);\n\n      // Check game over\n      if (scoreRef.current < 0) {\n        setGameOver(true);\n        return;\n      }\n\n      animationFrameId = requestAnimationFrame(loop);\n    };\n\n    animationFrameId = requestAnimationFrame(loop);\n\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [gameOver]);\n\n  /**\n   * Handle jump start\n   */\n  const handleJumpStart = useCallback(() => {\n    if (gameOver) return;\n\n    // Initialize audio on first interaction\n    audioManagerRef.current?.initialize();\n    // Play jump sound only once per press\n    audioManagerRef.current?.playJumpSound();\n\n    playerPhysicsRef.current?.startJump();\n  }, [gameOver]);\n\n  /**\n   * Handle jump end\n   */\n  const handleJumpEnd = useCallback(() => {\n    if (gameOver) return;\n    playerPhysicsRef.current?.endJump();\n    // Reset jump sound flag so it can play again on next press\n    audioManagerRef.current?.resetJumpSound();\n  }, [gameOver]);\n\n  /**\n   * Handle mouse/trackpad movement\n   */\n  const handleMouseMove = useCallback((event: MouseEvent) => {\n    if (gameOver) return;\n    const dims = dimensionsRef.current;\n    playerPhysicsRef.current?.setMousePosition(event.clientX, dims.width);\n  }, [gameOver]);\n\n  /**\n   * Handle touch movement (iPad/mobile)\n   */\n  const handleTouchMove = useCallback((event: TouchEvent) => {\n    if (gameOver) return;\n    if (event.touches.length > 0) {\n      const dims = dimensionsRef.current;\n      const touch = event.touches[0];\n      playerPhysicsRef.current?.setMousePosition(touch.clientX, dims.width);\n    }\n  }, [gameOver]);\n\n  /**\n   * Handle shooting (score 200+, triggered by 'S' key or double-tap)\n   */\n  const handleShoot = useCallback(() => {\n    if (gameOver || scoreRef.current < 100) return;\n\n    const currentPlayerState = playerPhysicsRef.current?.getState();\n    if (!currentPlayerState) return;\n\n    // Create projectile from center of player ball\n    const newProjectile: PlayerProjectile = {\n      x: currentPlayerState.position.x + BALL_SIZE / 2,\n      y: currentPlayerState.position.y + BALL_SIZE / 2 - PLAYER_PROJECTILE_HEIGHT / 2,\n      active: true,\n    };\n\n    setPlayerProjectiles((prev) => [...prev, newProjectile]);\n  }, [gameOver]);\n\n  /**\n   * Adds 75 points for testing purposes.\n   */\n  const handleTestScore = useCallback(() => {\n    scoreRef.current += 75;\n    laserPhysicsRef.current?.setScore(scoreRef.current);\n  }, []);\n\n  /**\n   * Restart game\n   */\n  const handleRestart = useCallback(() => {\n    const dims = dimensionsRef.current;\n\n    // Reset score\n    scoreRef.current = 0;\n    setScore(0);\n\n    // Reset systems\n    playerPhysicsRef.current?.reset(dims.playerStartX, dims.centerY);\n    laserPhysicsRef.current?.reset();\n    backgroundStarsRef.current?.reset();\n\n    // Reset state\n    setPlayerState(playerPhysicsRef.current?.getState() || playerState);\n    setLasers(laserPhysicsRef.current?.getLasers() || []);\n    setEnemyY(laserPhysicsRef.current?.getEnemyY() || dims.centerY);\n    setNumLasers(1);\n    setGameOver(false);\n    setWasHit(false);\n    setEnemyWasHit(false);\n    setPlayerProjectiles([]);\n    setHitCount(0);\n    setEnemyGrowthLevel(0);\n  }, [playerState]);\n\n  return {\n    // State\n    score,\n    gameOver,\n    hitCount,\n    enemyWasHit,\n    playerState,\n    lasers,\n    enemyY,\n    enemyScale,\n    numLasers,\n    wasHit,\n    playerProjectiles,\n    dimensions: dimensionsRef.current,\n\n    // Systems\n    backgroundStars: backgroundStarsRef.current,\n\n    // Handlers\n    handleJumpStart,\n    handleJumpEnd,\n    handleMouseMove,\n    handleTouchMove,\n    handleShoot,\n    handleRestart,\n    handleTestScore,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}