{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * useGameLoop Hook\n *\n * Main game loop that orchestrates all game systems\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { PlayerPhysics } from '../systems/playerPhysics';\nimport { LaserPhysics } from '../systems/laserPhysics';\nimport { AudioManager, setupAudioUnlock } from '../systems/audioManager';\nimport { BackgroundStars } from '../systems/backgroundStars';\nimport { ScrollingBackground } from '../systems/scrollingBackground';\nimport { BALL_SIZE, HITBOX_SIZE, PLAYER_X_POSITION, FLOOR_Y_POSITION, ENEMY_X_POSITION, SCORE_UPDATE_INTERVAL, PLAYER_PROJECTILE_SPEED, PLAYER_PROJECTILE_WIDTH, PLAYER_PROJECTILE_HEIGHT, ENEMY_WIDTH_GROWTH_PER_CYCLE, ENEMY_HEIGHT_GROWTH_PER_CYCLE, LEVEL_2_SCORE_THRESHOLD, LEVEL_3_SCORE_THRESHOLD, MAX_GROWTH_CYCLES, MAX_OUTS, HITS_PER_OUT, BACKGROUND_IMAGE_PATH } from '../config/gameConfig';\nexport const useGameLoop = () => {\n  _s();\n  // Game state\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [playerState, setPlayerState] = useState({\n    position: {\n      x: 0,\n      y: 0\n    },\n    velocity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    hasJumped: false,\n    isHolding: false,\n    holdStartTime: 0\n  });\n  const [lasers, setLasers] = useState([]);\n  const [enemyY, setEnemyY] = useState(0);\n  const [enemyScale, setEnemyScale] = useState({\n    scaleX: 1,\n    scaleY: 1\n  });\n  const [numLasers, setNumLasers] = useState(1);\n  const [wasHit, setWasHit] = useState(false);\n  const [playerProjectiles, setPlayerProjectiles] = useState([]);\n  const [hitCount, setHitCount] = useState(0);\n  const [enemyWasHit, setEnemyWasHit] = useState(false);\n  const [enemyGrowthLevel, setEnemyGrowthLevel] = useState(0);\n  const enemyGrowthLevelRef = useRef(enemyGrowthLevel);\n  const [level, setLevel] = useState(1);\n  const [enemyHits, setEnemyHits] = useState(0); // Track enemy hits on player\n  const [playerGrowthLevel, setPlayerGrowthLevel] = useState(0); // Track player growth from enemy hits\n  const playerGrowthLevelRef = useRef(playerGrowthLevel); // Ref for immediate access in game loop\n  const [playerOuts, setPlayerOuts] = useState(0); // Track player outs (0-10)\n  const [enemyOuts, setEnemyOuts] = useState(0); // Track enemy outs (0-10)\n  const [shootGameOver, setShootGameOver] = useState(false); // Special game over when player reaches 10 outs\n\n  // Game systems\n  const playerPhysicsRef = useRef(null);\n  const laserPhysicsRef = useRef(null);\n  const audioManagerRef = useRef(null);\n  const backgroundStarsRef = useRef(null);\n  const scrollingBackgroundRef = useRef(null);\n  const scoreRef = useRef(0);\n  const gameOverRef = useRef(false); // Immediate game over flag\n\n  const dimensionsRef = useRef({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    centerY: window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2,\n    playerStartX: window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2,\n    enemyX: window.innerWidth * ENEMY_X_POSITION - BALL_SIZE\n  });\n\n  // Initialize\n  useEffect(() => {\n    const dims = dimensionsRef.current;\n    playerPhysicsRef.current = new PlayerPhysics(dims.playerStartX, dims.centerY, dims.centerY);\n    laserPhysicsRef.current = new LaserPhysics(dims.width, dims.height, dims.centerY, dims.enemyX);\n    audioManagerRef.current = new AudioManager();\n    const cleanupAudio = setupAudioUnlock(audioManagerRef.current);\n    backgroundStarsRef.current = new BackgroundStars(dims.width, dims.height);\n    scrollingBackgroundRef.current = new ScrollingBackground(BACKGROUND_IMAGE_PATH);\n    setPlayerState(playerPhysicsRef.current.getState());\n    setLasers(laserPhysicsRef.current.getLasers());\n    setEnemyY(laserPhysicsRef.current.getEnemyY());\n    return () => {\n      var _audioManagerRef$curr;\n      cleanupAudio();\n      (_audioManagerRef$curr = audioManagerRef.current) === null || _audioManagerRef$curr === void 0 ? void 0 : _audioManagerRef$curr.dispose();\n    };\n  }, []);\n\n  // Update score display\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setScore(scoreRef.current);\n    }, SCORE_UPDATE_INTERVAL);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Keep a ref in sync with the enemyGrowthLevel state\n  useEffect(() => {\n    enemyGrowthLevelRef.current = enemyGrowthLevel;\n  }, [enemyGrowthLevel]);\n\n  // Handle resize\n  useEffect(() => {\n    const handleResize = () => {\n      var _playerPhysicsRef$cur, _laserPhysicsRef$curr, _backgroundStarsRef$c, _scrollingBackgroundR;\n      const dims = dimensionsRef.current;\n      dims.width = window.innerWidth;\n      dims.height = window.innerHeight;\n      dims.centerY = window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2;\n      dims.playerStartX = window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2;\n      dims.enemyX = window.innerWidth * ENEMY_X_POSITION - BALL_SIZE;\n      (_playerPhysicsRef$cur = playerPhysicsRef.current) === null || _playerPhysicsRef$cur === void 0 ? void 0 : _playerPhysicsRef$cur.updateCenterY(dims.centerY);\n      (_laserPhysicsRef$curr = laserPhysicsRef.current) === null || _laserPhysicsRef$curr === void 0 ? void 0 : _laserPhysicsRef$curr.updateDimensions(dims.width, dims.height, dims.centerY, dims.enemyX);\n      (_backgroundStarsRef$c = backgroundStarsRef.current) === null || _backgroundStarsRef$c === void 0 ? void 0 : _backgroundStarsRef$c.updateDimensions(dims.width, dims.height);\n      (_scrollingBackgroundR = scrollingBackgroundRef.current) === null || _scrollingBackgroundR === void 0 ? void 0 : _scrollingBackgroundR.updateDimensions(dims.width, dims.height);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Main game loop\n  useEffect(() => {\n    if (gameOver) return;\n    let animationFrameId;\n    const loop = () => {\n      var _scrollingBackgroundR2, _backgroundStarsRef$c2, _laserPhysicsRef$curr2, _laserPhysicsRef$curr3, _playerPhysicsRef$cur2, _laserPhysicsRef$curr4, _playerPhysicsRef$cur4, _laserPhysicsRef$curr7, _laserPhysicsRef$curr8;\n      // Don't update anything if game is over\n      if (gameOverRef.current) return;\n      (_scrollingBackgroundR2 = scrollingBackgroundRef.current) === null || _scrollingBackgroundR2 === void 0 ? void 0 : _scrollingBackgroundR2.update();\n      (_backgroundStarsRef$c2 = backgroundStarsRef.current) === null || _backgroundStarsRef$c2 === void 0 ? void 0 : _backgroundStarsRef$c2.update();\n      (_laserPhysicsRef$curr2 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr2 === void 0 ? void 0 : _laserPhysicsRef$curr2.updateLaserCount(scoreRef.current);\n      setNumLasers(((_laserPhysicsRef$curr3 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr3 === void 0 ? void 0 : _laserPhysicsRef$curr3.getNumLasers()) || 1);\n      const newPlayerState = (_playerPhysicsRef$cur2 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur2 === void 0 ? void 0 : _playerPhysicsRef$cur2.update();\n      if (newPlayerState) {\n        var _playerPhysicsRef$cur3;\n        // NOTE: Player growth scaling disabled to preserve bounce animation\n        // const growthScale = 1 + (playerGrowthLevelRef.current * 0.25);\n        // newPlayerState.scaleX = growthScale;\n        // newPlayerState.scaleY = growthScale;\n\n        setPlayerState(newPlayerState);\n        if ((_playerPhysicsRef$cur3 = playerPhysicsRef.current) !== null && _playerPhysicsRef$cur3 !== void 0 && _playerPhysicsRef$cur3.shouldPlayBounceSound()) {\n          var _audioManagerRef$curr2;\n          const volume = playerPhysicsRef.current.getBounceVolume();\n          (_audioManagerRef$curr2 = audioManagerRef.current) === null || _audioManagerRef$curr2 === void 0 ? void 0 : _audioManagerRef$curr2.playBounce(volume);\n        }\n      }\n      const laserUpdate = (_laserPhysicsRef$curr4 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr4 === void 0 ? void 0 : _laserPhysicsRef$curr4.update(scoreRef.current, (newPlayerState === null || newPlayerState === void 0 ? void 0 : newPlayerState.position) || {\n        x: 0,\n        y: 0\n      }, ((_playerPhysicsRef$cur4 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur4 === void 0 ? void 0 : _playerPhysicsRef$cur4.hasPlayerJumped()) || false);\n      if (laserUpdate && laserPhysicsRef.current) {\n        scoreRef.current += laserUpdate.scoreChange;\n        if (laserUpdate.wasHit) {\n          var _audioManagerRef$curr3;\n          setWasHit(true);\n          (_audioManagerRef$curr3 = audioManagerRef.current) === null || _audioManagerRef$curr3 === void 0 ? void 0 : _audioManagerRef$curr3.playLaserHit();\n          setTimeout(() => setWasHit(false), 250);\n        }\n\n        // Handle enemy hits (Level 2 feature)\n        if (laserUpdate.enemyHitCount > 0) {\n          setEnemyHits(prev => {\n            const newHits = prev + laserUpdate.enemyHitCount;\n\n            // Check if we hit 20 (one cycle complete)\n            if (newHits >= HITS_PER_OUT) {\n              // Award an out to the enemy\n              setEnemyOuts(prevOuts => {\n                const newOuts = prevOuts + Math.floor(newHits / HITS_PER_OUT);\n\n                // Check for \"Shoot!\" game over when enemy reaches 10 outs\n                if (newOuts >= MAX_OUTS) {\n                  gameOverRef.current = true; // Immediately stop game loop\n                  setShootGameOver(true);\n                  setGameOver(true);\n                }\n                return Math.min(newOuts, MAX_OUTS);\n              });\n\n              // Player grows when enemy completes a cycle (every 20 hits)\n              const completedCycles = Math.floor(newHits / HITS_PER_OUT);\n              setPlayerGrowthLevel(prevGrowth => {\n                const newGrowth = prevGrowth + completedCycles;\n                // Cap at MAX_GROWTH_CYCLES, then reset to 0\n                const finalGrowth = newGrowth >= MAX_GROWTH_CYCLES ? 0 : newGrowth;\n                playerGrowthLevelRef.current = finalGrowth; // Update ref immediately\n                return finalGrowth;\n              });\n\n              // Reset hits counter after awarding the out\n              return newHits % HITS_PER_OUT;\n            }\n            return newHits;\n          });\n        }\n        setEnemyY(laserPhysicsRef.current.getEnemyY());\n        setLasers(laserPhysicsRef.current.getLasers());\n      }\n\n      // Level progression\n      if (scoreRef.current >= LEVEL_3_SCORE_THRESHOLD && level < 3) {\n        setLevel(3);\n      } else if (scoreRef.current >= LEVEL_2_SCORE_THRESHOLD && level === 1) {\n        setLevel(2);\n      }\n\n      // Handle projectiles & enemy hits\n      if (scoreRef.current >= 100) {\n        setPlayerProjectiles(prev => prev.map(projectile => {\n          var _laserPhysicsRef$curr5;\n          if (!projectile.active) return projectile;\n          const newX = projectile.x + PLAYER_PROJECTILE_SPEED;\n          const dims = dimensionsRef.current;\n          const currentEnemyWidth = BALL_SIZE + enemyGrowthLevelRef.current * ENEMY_WIDTH_GROWTH_PER_CYCLE;\n          const currentEnemyHeight = BALL_SIZE + enemyGrowthLevelRef.current * ENEMY_HEIGHT_GROWTH_PER_CYCLE;\n          const enemyCurrentY = ((_laserPhysicsRef$curr5 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr5 === void 0 ? void 0 : _laserPhysicsRef$curr5.getEnemyY()) || 0;\n          const hitEnemy = newX + PLAYER_PROJECTILE_WIDTH > dims.enemyX && newX < dims.enemyX + currentEnemyWidth && projectile.y + PLAYER_PROJECTILE_HEIGHT > enemyCurrentY && projectile.y < enemyCurrentY + currentEnemyHeight;\n          if (hitEnemy) {\n            var _audioManagerRef$curr4;\n            setHitCount(prevHit => {\n              const newHitCount = prevHit + 1;\n\n              // Check if we hit 20 (one cycle complete)\n              if (newHitCount >= HITS_PER_OUT) {\n                // Award an out to the player\n                setPlayerOuts(prevOuts => {\n                  const newOuts = prevOuts + Math.floor(newHitCount / HITS_PER_OUT);\n\n                  // Check for \"Shoot!\" game over\n                  if (newOuts >= MAX_OUTS) {\n                    gameOverRef.current = true; // Immediately stop game loop\n                    setShootGameOver(true);\n                    setGameOver(true);\n                  }\n                  return Math.min(newOuts, MAX_OUTS);\n                });\n\n                // Enemy grows when player completes a cycle (every 20 hits)\n                const completedCycles = Math.floor(newHitCount / HITS_PER_OUT);\n                setEnemyGrowthLevel(prevGrowth => {\n                  var _laserPhysicsRef$curr6;\n                  const newGrowth = prevGrowth + completedCycles;\n                  enemyGrowthLevelRef.current = newGrowth >= MAX_GROWTH_CYCLES ? 0 : newGrowth;\n                  (_laserPhysicsRef$curr6 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr6 === void 0 ? void 0 : _laserPhysicsRef$curr6.setEnemyGrowthLevel(enemyGrowthLevelRef.current);\n                  // Cap at MAX_GROWTH_CYCLES, then reset to 0\n                  return enemyGrowthLevelRef.current;\n                });\n\n                // Reset hits counter after awarding the out\n                return newHitCount % HITS_PER_OUT;\n              }\n              return newHitCount;\n            });\n            setEnemyWasHit(true);\n            (_audioManagerRef$curr4 = audioManagerRef.current) === null || _audioManagerRef$curr4 === void 0 ? void 0 : _audioManagerRef$curr4.playLaserHit();\n            setTimeout(() => setEnemyWasHit(false), 250);\n            return {\n              ...projectile,\n              active: false\n            };\n          }\n          if (newX > dims.width) return {\n            ...projectile,\n            active: false\n          };\n          return {\n            ...projectile,\n            x: newX\n          };\n        }).filter(p => p.active));\n      }\n\n      // ✅ Pass updated growth level to physics FIRST\n      (_laserPhysicsRef$curr7 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr7 === void 0 ? void 0 : _laserPhysicsRef$curr7.setEnemyGrowthLevel(enemyGrowthLevelRef.current);\n\n      // ✅ Now get updated scale that reflects growth\n      const newScale = ((_laserPhysicsRef$curr8 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr8 === void 0 ? void 0 : _laserPhysicsRef$curr8.getEnemyScale()) || 1;\n      setEnemyScale({\n        scaleX: newScale,\n        scaleY: newScale\n      });\n      if (scoreRef.current < 0) {\n        gameOverRef.current = true; // Immediately stop game loop\n        setGameOver(true);\n        return;\n      }\n      animationFrameId = requestAnimationFrame(loop);\n    };\n    animationFrameId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(animationFrameId);\n  }, [gameOver]);\n\n  // Jump handlers\n  const handleJumpStart = useCallback(() => {\n    var _audioManagerRef$curr5, _audioManagerRef$curr6, _playerPhysicsRef$cur5;\n    if (gameOver) return;\n    (_audioManagerRef$curr5 = audioManagerRef.current) === null || _audioManagerRef$curr5 === void 0 ? void 0 : _audioManagerRef$curr5.initialize();\n    (_audioManagerRef$curr6 = audioManagerRef.current) === null || _audioManagerRef$curr6 === void 0 ? void 0 : _audioManagerRef$curr6.playJumpSound();\n    (_playerPhysicsRef$cur5 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur5 === void 0 ? void 0 : _playerPhysicsRef$cur5.startJump();\n  }, [gameOver]);\n  const handleJumpEnd = useCallback(() => {\n    var _playerPhysicsRef$cur6, _audioManagerRef$curr7;\n    if (gameOver) return;\n    (_playerPhysicsRef$cur6 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur6 === void 0 ? void 0 : _playerPhysicsRef$cur6.endJump();\n    (_audioManagerRef$curr7 = audioManagerRef.current) === null || _audioManagerRef$curr7 === void 0 ? void 0 : _audioManagerRef$curr7.resetJumpSound();\n  }, [gameOver]);\n  const handleMouseMove = useCallback(event => {\n    var _playerPhysicsRef$cur7;\n    if (gameOver) return;\n    const dims = dimensionsRef.current;\n    (_playerPhysicsRef$cur7 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur7 === void 0 ? void 0 : _playerPhysicsRef$cur7.setMousePosition(event.clientX, dims.width);\n  }, [gameOver]);\n  const handleTouchMove = useCallback(event => {\n    if (gameOver) return;\n    if (event.touches.length > 0) {\n      var _playerPhysicsRef$cur8;\n      const dims = dimensionsRef.current;\n      const touch = event.touches[0];\n      (_playerPhysicsRef$cur8 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur8 === void 0 ? void 0 : _playerPhysicsRef$cur8.setMousePosition(touch.clientX, dims.width);\n    }\n  }, [gameOver]);\n  const handleShoot = useCallback(() => {\n    var _playerPhysicsRef$cur9;\n    if (gameOver || scoreRef.current < 100) return; // Shooting unlocks at score 100\n    const currentPlayerState = (_playerPhysicsRef$cur9 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur9 === void 0 ? void 0 : _playerPhysicsRef$cur9.getState();\n    if (!currentPlayerState) return;\n    const newProjectile = {\n      x: currentPlayerState.position.x + BALL_SIZE / 2,\n      y: currentPlayerState.position.y + BALL_SIZE / 2 - PLAYER_PROJECTILE_HEIGHT / 2,\n      active: true\n    };\n    setPlayerProjectiles(prev => [...prev, newProjectile]);\n  }, [gameOver]);\n  const handleTestScore = useCallback(() => {\n    var _laserPhysicsRef$curr9;\n    scoreRef.current += 75;\n    (_laserPhysicsRef$curr9 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr9 === void 0 ? void 0 : _laserPhysicsRef$curr9.setScore(scoreRef.current);\n  }, []);\n  const handleRestart = useCallback(() => {\n    var _playerPhysicsRef$cur0, _laserPhysicsRef$curr0, _backgroundStarsRef$c3, _scrollingBackgroundR3, _playerPhysicsRef$cur1, _laserPhysicsRef$curr1, _laserPhysicsRef$curr10;\n    const dims = dimensionsRef.current;\n    scoreRef.current = 0;\n    gameOverRef.current = false; // Reset game over flag\n    setScore(0);\n    (_playerPhysicsRef$cur0 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur0 === void 0 ? void 0 : _playerPhysicsRef$cur0.reset(dims.playerStartX, dims.centerY);\n    (_laserPhysicsRef$curr0 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr0 === void 0 ? void 0 : _laserPhysicsRef$curr0.reset();\n    (_backgroundStarsRef$c3 = backgroundStarsRef.current) === null || _backgroundStarsRef$c3 === void 0 ? void 0 : _backgroundStarsRef$c3.reset();\n    (_scrollingBackgroundR3 = scrollingBackgroundRef.current) === null || _scrollingBackgroundR3 === void 0 ? void 0 : _scrollingBackgroundR3.reset();\n    setPlayerState(((_playerPhysicsRef$cur1 = playerPhysicsRef.current) === null || _playerPhysicsRef$cur1 === void 0 ? void 0 : _playerPhysicsRef$cur1.getState()) || playerState);\n    setLasers(((_laserPhysicsRef$curr1 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr1 === void 0 ? void 0 : _laserPhysicsRef$curr1.getLasers()) || []);\n    setEnemyY(((_laserPhysicsRef$curr10 = laserPhysicsRef.current) === null || _laserPhysicsRef$curr10 === void 0 ? void 0 : _laserPhysicsRef$curr10.getEnemyY()) || dims.centerY);\n    setNumLasers(1);\n    setGameOver(false);\n    setWasHit(false);\n    setEnemyWasHit(false);\n    setPlayerProjectiles([]);\n    setHitCount(0);\n    setEnemyGrowthLevel(0);\n    setEnemyHits(0);\n    setPlayerGrowthLevel(0);\n    playerGrowthLevelRef.current = 0; // Reset ref immediately\n    setPlayerOuts(0);\n    setEnemyOuts(0);\n    setShootGameOver(false);\n    setLevel(1);\n  }, [playerState]);\n\n  // Test function to jump to Level 2\n  const jumpToLevel2 = useCallback(() => {\n    scoreRef.current = 100;\n    setScore(100);\n    setLevel(2);\n  }, []);\n  return {\n    score,\n    gameOver,\n    hitCount,\n    enemyWasHit,\n    playerState,\n    lasers,\n    enemyY,\n    enemyScale,\n    numLasers,\n    wasHit,\n    playerProjectiles,\n    level,\n    enemyHits,\n    playerOuts,\n    enemyOuts,\n    shootGameOver,\n    dimensions: dimensionsRef.current,\n    backgroundStars: backgroundStarsRef.current,\n    scrollingBackground: scrollingBackgroundRef.current,\n    handleJumpStart,\n    handleJumpEnd,\n    handleMouseMove,\n    handleTouchMove,\n    handleShoot,\n    handleRestart,\n    handleTestScore,\n    jumpToLevel2 // Test function\n  };\n};\n_s(useGameLoop, \"OBXTZKBS7xogJ6SuBQjx3d2+5IU=\");","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","PlayerPhysics","LaserPhysics","AudioManager","setupAudioUnlock","BackgroundStars","ScrollingBackground","BALL_SIZE","HITBOX_SIZE","PLAYER_X_POSITION","FLOOR_Y_POSITION","ENEMY_X_POSITION","SCORE_UPDATE_INTERVAL","PLAYER_PROJECTILE_SPEED","PLAYER_PROJECTILE_WIDTH","PLAYER_PROJECTILE_HEIGHT","ENEMY_WIDTH_GROWTH_PER_CYCLE","ENEMY_HEIGHT_GROWTH_PER_CYCLE","LEVEL_2_SCORE_THRESHOLD","LEVEL_3_SCORE_THRESHOLD","MAX_GROWTH_CYCLES","MAX_OUTS","HITS_PER_OUT","BACKGROUND_IMAGE_PATH","useGameLoop","_s","score","setScore","gameOver","setGameOver","playerState","setPlayerState","position","x","y","velocity","scaleX","scaleY","hasJumped","isHolding","holdStartTime","lasers","setLasers","enemyY","setEnemyY","enemyScale","setEnemyScale","numLasers","setNumLasers","wasHit","setWasHit","playerProjectiles","setPlayerProjectiles","hitCount","setHitCount","enemyWasHit","setEnemyWasHit","enemyGrowthLevel","setEnemyGrowthLevel","enemyGrowthLevelRef","level","setLevel","enemyHits","setEnemyHits","playerGrowthLevel","setPlayerGrowthLevel","playerGrowthLevelRef","playerOuts","setPlayerOuts","enemyOuts","setEnemyOuts","shootGameOver","setShootGameOver","playerPhysicsRef","laserPhysicsRef","audioManagerRef","backgroundStarsRef","scrollingBackgroundRef","scoreRef","gameOverRef","dimensionsRef","width","window","innerWidth","height","innerHeight","centerY","playerStartX","enemyX","dims","current","cleanupAudio","getState","getLasers","getEnemyY","_audioManagerRef$curr","dispose","interval","setInterval","clearInterval","handleResize","_playerPhysicsRef$cur","_laserPhysicsRef$curr","_backgroundStarsRef$c","_scrollingBackgroundR","updateCenterY","updateDimensions","addEventListener","removeEventListener","animationFrameId","loop","_scrollingBackgroundR2","_backgroundStarsRef$c2","_laserPhysicsRef$curr2","_laserPhysicsRef$curr3","_playerPhysicsRef$cur2","_laserPhysicsRef$curr4","_playerPhysicsRef$cur4","_laserPhysicsRef$curr7","_laserPhysicsRef$curr8","update","updateLaserCount","getNumLasers","newPlayerState","_playerPhysicsRef$cur3","shouldPlayBounceSound","_audioManagerRef$curr2","volume","getBounceVolume","playBounce","laserUpdate","hasPlayerJumped","scoreChange","_audioManagerRef$curr3","playLaserHit","setTimeout","enemyHitCount","prev","newHits","prevOuts","newOuts","Math","floor","min","completedCycles","prevGrowth","newGrowth","finalGrowth","map","projectile","_laserPhysicsRef$curr5","active","newX","currentEnemyWidth","currentEnemyHeight","enemyCurrentY","hitEnemy","_audioManagerRef$curr4","prevHit","newHitCount","_laserPhysicsRef$curr6","filter","p","newScale","getEnemyScale","requestAnimationFrame","cancelAnimationFrame","handleJumpStart","_audioManagerRef$curr5","_audioManagerRef$curr6","_playerPhysicsRef$cur5","initialize","playJumpSound","startJump","handleJumpEnd","_playerPhysicsRef$cur6","_audioManagerRef$curr7","endJump","resetJumpSound","handleMouseMove","event","_playerPhysicsRef$cur7","setMousePosition","clientX","handleTouchMove","touches","length","_playerPhysicsRef$cur8","touch","handleShoot","_playerPhysicsRef$cur9","currentPlayerState","newProjectile","handleTestScore","_laserPhysicsRef$curr9","handleRestart","_playerPhysicsRef$cur0","_laserPhysicsRef$curr0","_backgroundStarsRef$c3","_scrollingBackgroundR3","_playerPhysicsRef$cur1","_laserPhysicsRef$curr1","_laserPhysicsRef$curr10","reset","jumpToLevel2","dimensions","backgroundStars","scrollingBackground"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/hooks/useGameLoop.ts"],"sourcesContent":["/**\n * useGameLoop Hook\n *\n * Main game loop that orchestrates all game systems\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { PlayerPhysics } from '../systems/playerPhysics';\nimport { LaserPhysics } from '../systems/laserPhysics';\nimport { AudioManager, setupAudioUnlock } from '../systems/audioManager';\nimport { BackgroundStars } from '../systems/backgroundStars';\nimport { ScrollingBackground } from '../systems/scrollingBackground';\nimport { PlayerState, LaserState, PlayerProjectile } from '../types/game';\nimport {\n  BALL_SIZE,\n  HITBOX_SIZE,\n  PLAYER_X_POSITION,\n  FLOOR_Y_POSITION,\n  ENEMY_X_POSITION,\n  SCORE_UPDATE_INTERVAL,\n  PLAYER_PROJECTILE_SPEED,\n  PLAYER_PROJECTILE_WIDTH,\n  PLAYER_PROJECTILE_HEIGHT,\n  ENEMY_WIDTH_GROWTH_PER_CYCLE,\n  ENEMY_HEIGHT_GROWTH_PER_CYCLE,\n  LEVEL_2_SCORE_THRESHOLD,\n  LEVEL_3_SCORE_THRESHOLD,\n  ENEMY_HITS_FOR_GROWTH,\n  MAX_GROWTH_CYCLES,\n  MAX_OUTS,\n  HITS_PER_OUT,\n  BACKGROUND_IMAGE_PATH,\n} from '../config/gameConfig';\n\nexport const useGameLoop = () => {\n  // Game state\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [playerState, setPlayerState] = useState<PlayerState>({\n    position: { x: 0, y: 0 },\n    velocity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    hasJumped: false,\n    isHolding: false,\n    holdStartTime: 0,\n  });\n  const [lasers, setLasers] = useState<LaserState[]>([]);\n  const [enemyY, setEnemyY] = useState(0);\n  const [enemyScale, setEnemyScale] = useState({ scaleX: 1, scaleY: 1 });\n  const [numLasers, setNumLasers] = useState(1);\n  const [wasHit, setWasHit] = useState(false);\n  const [playerProjectiles, setPlayerProjectiles] = useState<PlayerProjectile[]>([]);\n  const [hitCount, setHitCount] = useState(0);\n  const [enemyWasHit, setEnemyWasHit] = useState(false);\n  const [enemyGrowthLevel, setEnemyGrowthLevel] = useState(0);\n  const enemyGrowthLevelRef = useRef(enemyGrowthLevel);\n  const [level, setLevel] = useState<1 | 2 | 3>(1);\n  const [enemyHits, setEnemyHits] = useState(0); // Track enemy hits on player\n  const [playerGrowthLevel, setPlayerGrowthLevel] = useState(0); // Track player growth from enemy hits\n  const playerGrowthLevelRef = useRef(playerGrowthLevel); // Ref for immediate access in game loop\n  const [playerOuts, setPlayerOuts] = useState(0); // Track player outs (0-10)\n  const [enemyOuts, setEnemyOuts] = useState(0); // Track enemy outs (0-10)\n  const [shootGameOver, setShootGameOver] = useState(false); // Special game over when player reaches 10 outs\n\n  // Game systems\n  const playerPhysicsRef = useRef<PlayerPhysics | null>(null);\n  const laserPhysicsRef = useRef<LaserPhysics | null>(null);\n  const audioManagerRef = useRef<AudioManager | null>(null);\n  const backgroundStarsRef = useRef<BackgroundStars | null>(null);\n  const scrollingBackgroundRef = useRef<ScrollingBackground | null>(null);\n\n  const scoreRef = useRef(0);\n  const gameOverRef = useRef(false); // Immediate game over flag\n\n  const dimensionsRef = useRef({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    centerY: window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2,\n    playerStartX: window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2,\n    enemyX: window.innerWidth * ENEMY_X_POSITION - BALL_SIZE,\n  });\n\n  // Initialize\n  useEffect(() => {\n    const dims = dimensionsRef.current;\n\n    playerPhysicsRef.current = new PlayerPhysics(\n      dims.playerStartX,\n      dims.centerY,\n      dims.centerY\n    );\n\n    laserPhysicsRef.current = new LaserPhysics(\n      dims.width,\n      dims.height,\n      dims.centerY,\n      dims.enemyX\n    );\n\n    audioManagerRef.current = new AudioManager();\n    const cleanupAudio = setupAudioUnlock(audioManagerRef.current);\n\n    backgroundStarsRef.current = new BackgroundStars(dims.width, dims.height);\n    scrollingBackgroundRef.current = new ScrollingBackground(BACKGROUND_IMAGE_PATH);\n\n    setPlayerState(playerPhysicsRef.current.getState());\n    setLasers(laserPhysicsRef.current.getLasers());\n    setEnemyY(laserPhysicsRef.current.getEnemyY());\n\n    return () => {\n      cleanupAudio();\n      audioManagerRef.current?.dispose();\n    };\n  }, []);\n\n  // Update score display\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setScore(scoreRef.current);\n    }, SCORE_UPDATE_INTERVAL);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Keep a ref in sync with the enemyGrowthLevel state\n  useEffect(() => {\n    enemyGrowthLevelRef.current = enemyGrowthLevel;\n  }, [enemyGrowthLevel]);\n\n  // Handle resize\n  useEffect(() => {\n    const handleResize = () => {\n      const dims = dimensionsRef.current;\n      dims.width = window.innerWidth;\n      dims.height = window.innerHeight;\n      dims.centerY = window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2;\n      dims.playerStartX = window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2;\n      dims.enemyX = window.innerWidth * ENEMY_X_POSITION - BALL_SIZE;\n\n      playerPhysicsRef.current?.updateCenterY(dims.centerY);\n      laserPhysicsRef.current?.updateDimensions(dims.width, dims.height, dims.centerY, dims.enemyX);\n      backgroundStarsRef.current?.updateDimensions(dims.width, dims.height);\n      scrollingBackgroundRef.current?.updateDimensions(dims.width, dims.height);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Main game loop\n  useEffect(() => {\n    if (gameOver) return;\n    let animationFrameId: number;\n\n    const loop = () => {\n      // Don't update anything if game is over\n      if (gameOverRef.current) return;\n\n      scrollingBackgroundRef.current?.update();\n      backgroundStarsRef.current?.update();\n      laserPhysicsRef.current?.updateLaserCount(scoreRef.current);\n      setNumLasers(laserPhysicsRef.current?.getNumLasers() || 1);\n\n      const newPlayerState = playerPhysicsRef.current?.update();\n      if (newPlayerState) {\n        // NOTE: Player growth scaling disabled to preserve bounce animation\n        // const growthScale = 1 + (playerGrowthLevelRef.current * 0.25);\n        // newPlayerState.scaleX = growthScale;\n        // newPlayerState.scaleY = growthScale;\n\n        setPlayerState(newPlayerState);\n        if (playerPhysicsRef.current?.shouldPlayBounceSound()) {\n          const volume = playerPhysicsRef.current.getBounceVolume();\n          audioManagerRef.current?.playBounce(volume);\n        }\n      }\n\n      const laserUpdate = laserPhysicsRef.current?.update(\n        scoreRef.current,\n        newPlayerState?.position || { x: 0, y: 0 },\n        playerPhysicsRef.current?.hasPlayerJumped() || false\n      );\n\n      if (laserUpdate && laserPhysicsRef.current) {\n        scoreRef.current += laserUpdate.scoreChange;\n        if (laserUpdate.wasHit) {\n          setWasHit(true);\n          audioManagerRef.current?.playLaserHit();\n          setTimeout(() => setWasHit(false), 250);\n        }\n\n        // Handle enemy hits (Level 2 feature)\n        if (laserUpdate.enemyHitCount > 0) {\n          setEnemyHits((prev) => {\n            const newHits = prev + laserUpdate.enemyHitCount;\n\n            // Check if we hit 20 (one cycle complete)\n            if (newHits >= HITS_PER_OUT) {\n              // Award an out to the enemy\n              setEnemyOuts((prevOuts) => {\n                const newOuts = prevOuts + Math.floor(newHits / HITS_PER_OUT);\n\n                // Check for \"Shoot!\" game over when enemy reaches 10 outs\n                if (newOuts >= MAX_OUTS) {\n                  gameOverRef.current = true; // Immediately stop game loop\n                  setShootGameOver(true);\n                  setGameOver(true);\n                }\n\n                return Math.min(newOuts, MAX_OUTS);\n              });\n\n              // Player grows when enemy completes a cycle (every 20 hits)\n              const completedCycles = Math.floor(newHits / HITS_PER_OUT);\n              setPlayerGrowthLevel((prevGrowth) => {\n                const newGrowth = prevGrowth + completedCycles;\n                // Cap at MAX_GROWTH_CYCLES, then reset to 0\n                const finalGrowth = newGrowth >= MAX_GROWTH_CYCLES ? 0 : newGrowth;\n                playerGrowthLevelRef.current = finalGrowth; // Update ref immediately\n                return finalGrowth;\n              });\n\n              // Reset hits counter after awarding the out\n              return newHits % HITS_PER_OUT;\n            }\n\n            return newHits;\n          });\n        }\n\n        setEnemyY(laserPhysicsRef.current.getEnemyY());\n        setLasers(laserPhysicsRef.current.getLasers());\n      }\n\n      // Level progression\n      if (scoreRef.current >= LEVEL_3_SCORE_THRESHOLD && level < 3) {\n        setLevel(3);\n      } else if (scoreRef.current >= LEVEL_2_SCORE_THRESHOLD && level === 1) {\n        setLevel(2);\n      }\n\n      // Handle projectiles & enemy hits\n      if (scoreRef.current >= 100) {\n        setPlayerProjectiles((prev) =>\n          prev\n            .map((projectile) => {\n              if (!projectile.active) return projectile;\n\n              const newX = projectile.x + PLAYER_PROJECTILE_SPEED;\n              const dims = dimensionsRef.current;\n              const currentEnemyWidth = BALL_SIZE + (enemyGrowthLevelRef.current * ENEMY_WIDTH_GROWTH_PER_CYCLE);\n              const currentEnemyHeight = BALL_SIZE + (enemyGrowthLevelRef.current * ENEMY_HEIGHT_GROWTH_PER_CYCLE);\n              const enemyCurrentY = laserPhysicsRef.current?.getEnemyY() || 0;\n\n              const hitEnemy =\n                newX + PLAYER_PROJECTILE_WIDTH > dims.enemyX &&\n                newX < dims.enemyX + currentEnemyWidth &&\n                projectile.y + PLAYER_PROJECTILE_HEIGHT > enemyCurrentY &&\n                projectile.y < enemyCurrentY + currentEnemyHeight;\n\n              if (hitEnemy) {\n                setHitCount((prevHit) => {\n                  const newHitCount = prevHit + 1;\n\n                  // Check if we hit 20 (one cycle complete)\n                  if (newHitCount >= HITS_PER_OUT) {\n                    // Award an out to the player\n                    setPlayerOuts((prevOuts) => {\n                      const newOuts = prevOuts + Math.floor(newHitCount / HITS_PER_OUT);\n\n                      // Check for \"Shoot!\" game over\n                      if (newOuts >= MAX_OUTS) {\n                        gameOverRef.current = true; // Immediately stop game loop\n                        setShootGameOver(true);\n                        setGameOver(true);\n                      }\n\n                      return Math.min(newOuts, MAX_OUTS);\n                    });\n\n                    // Enemy grows when player completes a cycle (every 20 hits)\n                    const completedCycles = Math.floor(newHitCount / HITS_PER_OUT);\n                    setEnemyGrowthLevel((prevGrowth) => {\n                      const newGrowth = prevGrowth + completedCycles;\n                      enemyGrowthLevelRef.current = newGrowth >= MAX_GROWTH_CYCLES ? 0 : newGrowth;\n                      laserPhysicsRef.current?.setEnemyGrowthLevel(enemyGrowthLevelRef.current);\n                      // Cap at MAX_GROWTH_CYCLES, then reset to 0\n                      return enemyGrowthLevelRef.current;\n                    });\n\n                    // Reset hits counter after awarding the out\n                    return newHitCount % HITS_PER_OUT;\n                  }\n\n                  return newHitCount;\n                });\n                setEnemyWasHit(true);\n                audioManagerRef.current?.playLaserHit();\n                setTimeout(() => setEnemyWasHit(false), 250);\n                return { ...projectile, active: false };\n              }\n\n              if (newX > dims.width) return { ...projectile, active: false };\n              return { ...projectile, x: newX };\n            })\n            .filter((p) => p.active)\n        );\n      }\n\n      // ✅ Pass updated growth level to physics FIRST\n      laserPhysicsRef.current?.setEnemyGrowthLevel(enemyGrowthLevelRef.current);\n\n      // ✅ Now get updated scale that reflects growth\n      const newScale = laserPhysicsRef.current?.getEnemyScale() || 1;\n      setEnemyScale({ scaleX: newScale, scaleY: newScale });\n\n      if (scoreRef.current < 0) {\n        gameOverRef.current = true; // Immediately stop game loop\n        setGameOver(true);\n        return;\n      }\n\n      animationFrameId = requestAnimationFrame(loop);\n    };\n\n    animationFrameId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(animationFrameId);\n  }, [gameOver]);\n\n  // Jump handlers\n  const handleJumpStart = useCallback(() => {\n    if (gameOver) return;\n    audioManagerRef.current?.initialize();\n    audioManagerRef.current?.playJumpSound();\n    playerPhysicsRef.current?.startJump();\n  }, [gameOver]);\n\n  const handleJumpEnd = useCallback(() => {\n    if (gameOver) return;\n    playerPhysicsRef.current?.endJump();\n    audioManagerRef.current?.resetJumpSound();\n  }, [gameOver]);\n\n  const handleMouseMove = useCallback((event: MouseEvent) => {\n    if (gameOver) return;\n    const dims = dimensionsRef.current;\n    playerPhysicsRef.current?.setMousePosition(event.clientX, dims.width);\n  }, [gameOver]);\n\n  const handleTouchMove = useCallback((event: TouchEvent) => {\n    if (gameOver) return;\n    if (event.touches.length > 0) {\n      const dims = dimensionsRef.current;\n      const touch = event.touches[0];\n      playerPhysicsRef.current?.setMousePosition(touch.clientX, dims.width);\n    }\n  }, [gameOver]);\n\n  const handleShoot = useCallback(() => {\n    if (gameOver || scoreRef.current < 100) return; // Shooting unlocks at score 100\n    const currentPlayerState = playerPhysicsRef.current?.getState();\n    if (!currentPlayerState) return;\n\n    const newProjectile: PlayerProjectile = {\n      x: currentPlayerState.position.x + BALL_SIZE / 2,\n      y: currentPlayerState.position.y + BALL_SIZE / 2 - PLAYER_PROJECTILE_HEIGHT / 2,\n      active: true,\n    };\n\n    setPlayerProjectiles((prev) => [...prev, newProjectile]);\n  }, [gameOver]);\n\n  const handleTestScore = useCallback(() => {\n    scoreRef.current += 75;\n    laserPhysicsRef.current?.setScore(scoreRef.current);\n  }, []);\n\n  const handleRestart = useCallback(() => {\n    const dims = dimensionsRef.current;\n    scoreRef.current = 0;\n    gameOverRef.current = false; // Reset game over flag\n    setScore(0);\n    playerPhysicsRef.current?.reset(dims.playerStartX, dims.centerY);\n    laserPhysicsRef.current?.reset();\n    backgroundStarsRef.current?.reset();\n    scrollingBackgroundRef.current?.reset();\n    setPlayerState(playerPhysicsRef.current?.getState() || playerState);\n    setLasers(laserPhysicsRef.current?.getLasers() || []);\n    setEnemyY(laserPhysicsRef.current?.getEnemyY() || dims.centerY);\n    setNumLasers(1);\n    setGameOver(false);\n    setWasHit(false);\n    setEnemyWasHit(false);\n    setPlayerProjectiles([]);\n    setHitCount(0);\n    setEnemyGrowthLevel(0);\n    setEnemyHits(0);\n    setPlayerGrowthLevel(0);\n    playerGrowthLevelRef.current = 0; // Reset ref immediately\n    setPlayerOuts(0);\n    setEnemyOuts(0);\n    setShootGameOver(false);\n    setLevel(1);\n  }, [playerState]);\n\n  // Test function to jump to Level 2\n  const jumpToLevel2 = useCallback(() => {\n    scoreRef.current = 100;\n    setScore(100);\n    setLevel(2);\n  }, []);\n\n  return {\n    score,\n    gameOver,\n    hitCount,\n    enemyWasHit,\n    playerState,\n    lasers,\n    enemyY,\n    enemyScale,\n    numLasers,\n    wasHit,\n    playerProjectiles,\n    level,\n    enemyHits,\n    playerOuts,\n    enemyOuts,\n    shootGameOver,\n    dimensions: dimensionsRef.current,\n    backgroundStars: backgroundStarsRef.current,\n    scrollingBackground: scrollingBackgroundRef.current,\n    handleJumpStart,\n    handleJumpEnd,\n    handleMouseMove,\n    handleTouchMove,\n    handleShoot,\n    handleRestart,\n    handleTestScore,\n    jumpToLevel2, // Test function\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}