{"ast":null,"code":"/**\n * Audio Manager System\n * Handles all game sound effects and background music\n */\n\nimport { BOUNCE_SOUND_PATH, LASER_HIT_SOUND_PATH, BACKGROUND_MUSIC_PATH, BACKGROUND_MUSIC_VOLUME, BOUNCE_DEBOUNCE_MS } from '../config/gameConfig';\nexport class AudioManager {\n  constructor() {\n    this.bounceSound = null;\n    this.laserHitSound = null;\n    this.backgroundMusic = null;\n    this.lastBounceTime = 0;\n    this.isUnlocked = false;\n    this.hasPlayedJumpSound = false;\n  }\n  // Track if jump sound played this press\n\n  /**\n   * Initialize audio system (must be called on user interaction)\n   */\n  initialize() {\n    if (this.isUnlocked) return;\n\n    // Create bounce sound\n    this.bounceSound = new Audio(BOUNCE_SOUND_PATH);\n    this.bounceSound.volume = 1;\n\n    // Create laser hit sound\n    this.laserHitSound = new Audio(LASER_HIT_SOUND_PATH);\n    this.laserHitSound.volume = 1;\n\n    // Create background music\n    this.backgroundMusic = new Audio(BACKGROUND_MUSIC_PATH);\n    this.backgroundMusic.loop = true;\n    this.backgroundMusic.volume = BACKGROUND_MUSIC_VOLUME;\n\n    // Start background music\n    this.backgroundMusic.play().catch(() => {\n      // Autoplay might be blocked\n    });\n\n    // Unlock bounce sound\n    this.bounceSound.play().then(() => {\n      if (this.bounceSound) {\n        this.bounceSound.pause();\n        this.bounceSound.currentTime = 0;\n      }\n    }).catch(() => {\n      // Autoplay might be blocked\n    });\n    this.isUnlocked = true;\n  }\n\n  /**\n   * Play jump sound (only once per button press)\n   */\n  playJumpSound() {\n    if (!this.bounceSound) return;\n    if (this.hasPlayedJumpSound) return; // Don't play again until released\n\n    this.bounceSound.currentTime = 0;\n    this.bounceSound.volume = 1;\n    this.bounceSound.play().catch(() => {\n      // Playback might fail\n    });\n    this.hasPlayedJumpSound = true;\n  }\n\n  /**\n   * Reset jump sound flag (call when button is released)\n   */\n  resetJumpSound() {\n    this.hasPlayedJumpSound = false;\n  }\n\n  /**\n   * Play bounce sound with volume control (for landing)\n   */\n  playBounce(volume = 1) {\n    if (!this.bounceSound) return;\n    const now = performance.now();\n\n    // Debounce rapid bounces\n    if (now - this.lastBounceTime < BOUNCE_DEBOUNCE_MS) {\n      return;\n    }\n    this.bounceSound.currentTime = 0;\n    this.bounceSound.volume = Math.max(0, Math.min(1, volume));\n    this.bounceSound.play().catch(() => {\n      // Playback might fail\n    });\n    this.lastBounceTime = now;\n  }\n\n  /**\n   * Play laser hit sound\n   */\n  playLaserHit() {\n    if (!this.laserHitSound) return;\n    this.laserHitSound.currentTime = 0;\n    this.laserHitSound.volume = 1;\n    this.laserHitSound.play().catch(() => {\n      // Playback might fail\n    });\n  }\n\n  /**\n   * Play background music\n   */\n  playBackgroundMusic() {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.play().catch(() => {\n      // Autoplay might be blocked\n    });\n  }\n\n  /**\n   * Pause background music\n   */\n  pauseBackgroundMusic() {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.pause();\n  }\n\n  /**\n   * Set background music volume\n   */\n  setMusicVolume(volume) {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.volume = Math.max(0, Math.min(1, volume));\n  }\n\n  /**\n   * Cleanup audio resources\n   */\n  dispose() {\n    if (this.bounceSound) {\n      this.bounceSound.pause();\n      this.bounceSound = null;\n    }\n    if (this.laserHitSound) {\n      this.laserHitSound.pause();\n      this.laserHitSound = null;\n    }\n    if (this.backgroundMusic) {\n      this.backgroundMusic.pause();\n      this.backgroundMusic = null;\n    }\n  }\n\n  /**\n   * Check if audio is unlocked\n   */\n  isAudioUnlocked() {\n    return this.isUnlocked;\n  }\n}\n\n/**\n * Hook for unlocking audio on first user interaction\n */\nexport const setupAudioUnlock = audioManager => {\n  const unlockAudio = () => {\n    audioManager.initialize();\n    cleanup();\n  };\n  const cleanup = () => {\n    window.removeEventListener('click', unlockAudio);\n    window.removeEventListener('keydown', unlockAudio);\n    window.removeEventListener('touchstart', unlockAudio);\n  };\n  window.addEventListener('click', unlockAudio);\n  window.addEventListener('keydown', unlockAudio);\n  window.addEventListener('touchstart', unlockAudio);\n  return cleanup;\n};","map":{"version":3,"names":["BOUNCE_SOUND_PATH","LASER_HIT_SOUND_PATH","BACKGROUND_MUSIC_PATH","BACKGROUND_MUSIC_VOLUME","BOUNCE_DEBOUNCE_MS","AudioManager","constructor","bounceSound","laserHitSound","backgroundMusic","lastBounceTime","isUnlocked","hasPlayedJumpSound","initialize","Audio","volume","loop","play","catch","then","pause","currentTime","playJumpSound","resetJumpSound","playBounce","now","performance","Math","max","min","playLaserHit","playBackgroundMusic","pauseBackgroundMusic","setMusicVolume","dispose","isAudioUnlocked","setupAudioUnlock","audioManager","unlockAudio","cleanup","window","removeEventListener","addEventListener"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/systems/audioManager.ts"],"sourcesContent":["/**\n * Audio Manager System\n * Handles all game sound effects and background music\n */\n\nimport {\n  BOUNCE_SOUND_PATH,\n  LASER_HIT_SOUND_PATH,\n  BACKGROUND_MUSIC_PATH,\n  BACKGROUND_MUSIC_VOLUME,\n  BOUNCE_DEBOUNCE_MS,\n} from '../config/gameConfig';\n\nexport class AudioManager {\n  private bounceSound: HTMLAudioElement | null = null;\n  private laserHitSound: HTMLAudioElement | null = null;\n  private backgroundMusic: HTMLAudioElement | null = null;\n  private lastBounceTime: number = 0;\n  private isUnlocked: boolean = false;\n  private hasPlayedJumpSound: boolean = false; // Track if jump sound played this press\n\n  /**\n   * Initialize audio system (must be called on user interaction)\n   */\n  initialize(): void {\n    if (this.isUnlocked) return;\n\n    // Create bounce sound\n    this.bounceSound = new Audio(BOUNCE_SOUND_PATH);\n    this.bounceSound.volume = 1;\n\n    // Create laser hit sound\n    this.laserHitSound = new Audio(LASER_HIT_SOUND_PATH);\n    this.laserHitSound.volume = 1;\n\n    // Create background music\n    this.backgroundMusic = new Audio(BACKGROUND_MUSIC_PATH);\n    this.backgroundMusic.loop = true;\n    this.backgroundMusic.volume = BACKGROUND_MUSIC_VOLUME;\n\n    // Start background music\n    this.backgroundMusic.play().catch(() => {\n      // Autoplay might be blocked\n    });\n\n    // Unlock bounce sound\n    this.bounceSound\n      .play()\n      .then(() => {\n        if (this.bounceSound) {\n          this.bounceSound.pause();\n          this.bounceSound.currentTime = 0;\n        }\n      })\n      .catch(() => {\n        // Autoplay might be blocked\n      });\n\n    this.isUnlocked = true;\n  }\n\n  /**\n   * Play jump sound (only once per button press)\n   */\n  playJumpSound(): void {\n    if (!this.bounceSound) return;\n    if (this.hasPlayedJumpSound) return; // Don't play again until released\n\n    this.bounceSound.currentTime = 0;\n    this.bounceSound.volume = 1;\n    this.bounceSound.play().catch(() => {\n      // Playback might fail\n    });\n\n    this.hasPlayedJumpSound = true;\n  }\n\n  /**\n   * Reset jump sound flag (call when button is released)\n   */\n  resetJumpSound(): void {\n    this.hasPlayedJumpSound = false;\n  }\n\n  /**\n   * Play bounce sound with volume control (for landing)\n   */\n  playBounce(volume: number = 1): void {\n    if (!this.bounceSound) return;\n\n    const now = performance.now();\n\n    // Debounce rapid bounces\n    if (now - this.lastBounceTime < BOUNCE_DEBOUNCE_MS) {\n      return;\n    }\n\n    this.bounceSound.currentTime = 0;\n    this.bounceSound.volume = Math.max(0, Math.min(1, volume));\n    this.bounceSound.play().catch(() => {\n      // Playback might fail\n    });\n\n    this.lastBounceTime = now;\n  }\n\n  /**\n   * Play laser hit sound\n   */\n  playLaserHit(): void {\n    if (!this.laserHitSound) return;\n\n    this.laserHitSound.currentTime = 0;\n    this.laserHitSound.volume = 1;\n    this.laserHitSound.play().catch(() => {\n      // Playback might fail\n    });\n  }\n\n  /**\n   * Play background music\n   */\n  playBackgroundMusic(): void {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.play().catch(() => {\n      // Autoplay might be blocked\n    });\n  }\n\n  /**\n   * Pause background music\n   */\n  pauseBackgroundMusic(): void {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.pause();\n  }\n\n  /**\n   * Set background music volume\n   */\n  setMusicVolume(volume: number): void {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.volume = Math.max(0, Math.min(1, volume));\n  }\n\n  /**\n   * Cleanup audio resources\n   */\n  dispose(): void {\n    if (this.bounceSound) {\n      this.bounceSound.pause();\n      this.bounceSound = null;\n    }\n    if (this.laserHitSound) {\n      this.laserHitSound.pause();\n      this.laserHitSound = null;\n    }\n    if (this.backgroundMusic) {\n      this.backgroundMusic.pause();\n      this.backgroundMusic = null;\n    }\n  }\n\n  /**\n   * Check if audio is unlocked\n   */\n  isAudioUnlocked(): boolean {\n    return this.isUnlocked;\n  }\n}\n\n/**\n * Hook for unlocking audio on first user interaction\n */\nexport const setupAudioUnlock = (audioManager: AudioManager): (() => void) => {\n  const unlockAudio = () => {\n    audioManager.initialize();\n    cleanup();\n  };\n\n  const cleanup = () => {\n    window.removeEventListener('click', unlockAudio);\n    window.removeEventListener('keydown', unlockAudio);\n    window.removeEventListener('touchstart', unlockAudio);\n  };\n\n  window.addEventListener('click', unlockAudio);\n  window.addEventListener('keydown', unlockAudio);\n  window.addEventListener('touchstart', unlockAudio);\n\n  return cleanup;\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,SACEA,iBAAiB,EACjBC,oBAAoB,EACpBC,qBAAqB,EACrBC,uBAAuB,EACvBC,kBAAkB,QACb,sBAAsB;AAE7B,OAAO,MAAMC,YAAY,CAAC;EAAAC,YAAA;IAAA,KAChBC,WAAW,GAA4B,IAAI;IAAA,KAC3CC,aAAa,GAA4B,IAAI;IAAA,KAC7CC,eAAe,GAA4B,IAAI;IAAA,KAC/CC,cAAc,GAAW,CAAC;IAAA,KAC1BC,UAAU,GAAY,KAAK;IAAA,KAC3BC,kBAAkB,GAAY,KAAK;EAAA;EAAE;;EAE7C;AACF;AACA;EACEC,UAAUA,CAAA,EAAS;IACjB,IAAI,IAAI,CAACF,UAAU,EAAE;;IAErB;IACA,IAAI,CAACJ,WAAW,GAAG,IAAIO,KAAK,CAACd,iBAAiB,CAAC;IAC/C,IAAI,CAACO,WAAW,CAACQ,MAAM,GAAG,CAAC;;IAE3B;IACA,IAAI,CAACP,aAAa,GAAG,IAAIM,KAAK,CAACb,oBAAoB,CAAC;IACpD,IAAI,CAACO,aAAa,CAACO,MAAM,GAAG,CAAC;;IAE7B;IACA,IAAI,CAACN,eAAe,GAAG,IAAIK,KAAK,CAACZ,qBAAqB,CAAC;IACvD,IAAI,CAACO,eAAe,CAACO,IAAI,GAAG,IAAI;IAChC,IAAI,CAACP,eAAe,CAACM,MAAM,GAAGZ,uBAAuB;;IAErD;IACA,IAAI,CAACM,eAAe,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MACtC;IAAA,CACD,CAAC;;IAEF;IACA,IAAI,CAACX,WAAW,CACbU,IAAI,CAAC,CAAC,CACNE,IAAI,CAAC,MAAM;MACV,IAAI,IAAI,CAACZ,WAAW,EAAE;QACpB,IAAI,CAACA,WAAW,CAACa,KAAK,CAAC,CAAC;QACxB,IAAI,CAACb,WAAW,CAACc,WAAW,GAAG,CAAC;MAClC;IACF,CAAC,CAAC,CACDH,KAAK,CAAC,MAAM;MACX;IAAA,CACD,CAAC;IAEJ,IAAI,CAACP,UAAU,GAAG,IAAI;EACxB;;EAEA;AACF;AACA;EACEW,aAAaA,CAAA,EAAS;IACpB,IAAI,CAAC,IAAI,CAACf,WAAW,EAAE;IACvB,IAAI,IAAI,CAACK,kBAAkB,EAAE,OAAO,CAAC;;IAErC,IAAI,CAACL,WAAW,CAACc,WAAW,GAAG,CAAC;IAChC,IAAI,CAACd,WAAW,CAACQ,MAAM,GAAG,CAAC;IAC3B,IAAI,CAACR,WAAW,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MAClC;IAAA,CACD,CAAC;IAEF,IAAI,CAACN,kBAAkB,GAAG,IAAI;EAChC;;EAEA;AACF;AACA;EACEW,cAAcA,CAAA,EAAS;IACrB,IAAI,CAACX,kBAAkB,GAAG,KAAK;EACjC;;EAEA;AACF;AACA;EACEY,UAAUA,CAACT,MAAc,GAAG,CAAC,EAAQ;IACnC,IAAI,CAAC,IAAI,CAACR,WAAW,EAAE;IAEvB,MAAMkB,GAAG,GAAGC,WAAW,CAACD,GAAG,CAAC,CAAC;;IAE7B;IACA,IAAIA,GAAG,GAAG,IAAI,CAACf,cAAc,GAAGN,kBAAkB,EAAE;MAClD;IACF;IAEA,IAAI,CAACG,WAAW,CAACc,WAAW,GAAG,CAAC;IAChC,IAAI,CAACd,WAAW,CAACQ,MAAM,GAAGY,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEd,MAAM,CAAC,CAAC;IAC1D,IAAI,CAACR,WAAW,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MAClC;IAAA,CACD,CAAC;IAEF,IAAI,CAACR,cAAc,GAAGe,GAAG;EAC3B;;EAEA;AACF;AACA;EACEK,YAAYA,CAAA,EAAS;IACnB,IAAI,CAAC,IAAI,CAACtB,aAAa,EAAE;IAEzB,IAAI,CAACA,aAAa,CAACa,WAAW,GAAG,CAAC;IAClC,IAAI,CAACb,aAAa,CAACO,MAAM,GAAG,CAAC;IAC7B,IAAI,CAACP,aAAa,CAACS,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MACpC;IAAA,CACD,CAAC;EACJ;;EAEA;AACF;AACA;EACEa,mBAAmBA,CAAA,EAAS;IAC1B,IAAI,CAAC,IAAI,CAACtB,eAAe,EAAE;IAC3B,IAAI,CAACA,eAAe,CAACQ,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MACtC;IAAA,CACD,CAAC;EACJ;;EAEA;AACF;AACA;EACEc,oBAAoBA,CAAA,EAAS;IAC3B,IAAI,CAAC,IAAI,CAACvB,eAAe,EAAE;IAC3B,IAAI,CAACA,eAAe,CAACW,KAAK,CAAC,CAAC;EAC9B;;EAEA;AACF;AACA;EACEa,cAAcA,CAAClB,MAAc,EAAQ;IACnC,IAAI,CAAC,IAAI,CAACN,eAAe,EAAE;IAC3B,IAAI,CAACA,eAAe,CAACM,MAAM,GAAGY,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEd,MAAM,CAAC,CAAC;EAChE;;EAEA;AACF;AACA;EACEmB,OAAOA,CAAA,EAAS;IACd,IAAI,IAAI,CAAC3B,WAAW,EAAE;MACpB,IAAI,CAACA,WAAW,CAACa,KAAK,CAAC,CAAC;MACxB,IAAI,CAACb,WAAW,GAAG,IAAI;IACzB;IACA,IAAI,IAAI,CAACC,aAAa,EAAE;MACtB,IAAI,CAACA,aAAa,CAACY,KAAK,CAAC,CAAC;MAC1B,IAAI,CAACZ,aAAa,GAAG,IAAI;IAC3B;IACA,IAAI,IAAI,CAACC,eAAe,EAAE;MACxB,IAAI,CAACA,eAAe,CAACW,KAAK,CAAC,CAAC;MAC5B,IAAI,CAACX,eAAe,GAAG,IAAI;IAC7B;EACF;;EAEA;AACF;AACA;EACE0B,eAAeA,CAAA,EAAY;IACzB,OAAO,IAAI,CAACxB,UAAU;EACxB;AACF;;AAEA;AACA;AACA;AACA,OAAO,MAAMyB,gBAAgB,GAAIC,YAA0B,IAAmB;EAC5E,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACxBD,YAAY,CAACxB,UAAU,CAAC,CAAC;IACzB0B,OAAO,CAAC,CAAC;EACX,CAAC;EAED,MAAMA,OAAO,GAAGA,CAAA,KAAM;IACpBC,MAAM,CAACC,mBAAmB,CAAC,OAAO,EAAEH,WAAW,CAAC;IAChDE,MAAM,CAACC,mBAAmB,CAAC,SAAS,EAAEH,WAAW,CAAC;IAClDE,MAAM,CAACC,mBAAmB,CAAC,YAAY,EAAEH,WAAW,CAAC;EACvD,CAAC;EAEDE,MAAM,CAACE,gBAAgB,CAAC,OAAO,EAAEJ,WAAW,CAAC;EAC7CE,MAAM,CAACE,gBAAgB,CAAC,SAAS,EAAEJ,WAAW,CAAC;EAC/CE,MAAM,CAACE,gBAAgB,CAAC,YAAY,EAAEJ,WAAW,CAAC;EAElD,OAAOC,OAAO;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}