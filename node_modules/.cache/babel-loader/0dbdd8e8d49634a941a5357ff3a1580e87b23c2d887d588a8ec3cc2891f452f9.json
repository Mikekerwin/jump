{"ast":null,"code":"/**\n * Scrolling Background System\n * Handles smooth horizontal scrolling of repeating background image\n */import{BACKGROUND_SCROLL_SPEED,BACKGROUND_HEIGHT_SCALE}from'../config/gameConfig';export class ScrollingBackground{constructor(imagePath){this.offsetX=0;this.imageWidth=0;this.imageHeight=0;this.image=null;this.imageLoaded=false;this.image=new Image();this.image.onload=()=>{this.imageWidth=this.image.width;this.imageHeight=this.image.height;this.imageLoaded=true;console.log(\"Background image loaded: \".concat(imagePath,\" (\").concat(this.imageWidth,\"x\").concat(this.imageHeight,\")\"));};this.image.onerror=error=>{console.error(\"Failed to load background image: \".concat(imagePath),error);};this.image.src=imagePath;console.log(\"Loading background image from: \".concat(imagePath));}/**\n   * Update background offset for scrolling animation\n   */update(){if(!this.imageLoaded)return;// Move background to the left\nthis.offsetX-=BACKGROUND_SCROLL_SPEED;// Reset offset when it reaches the image width for seamless loop\nif(Math.abs(this.offsetX)>=this.imageWidth){this.offsetX=0;}}/**\n   * Render the scrolling background\n   */render(ctx,canvasWidth,canvasHeight){if(!this.imageLoaded||!this.image)return;// Calculate scale to fit height with additional height scale factor\nconst scale=canvasHeight*BACKGROUND_HEIGHT_SCALE/this.imageHeight;const scaledWidth=this.imageWidth*scale;const scaledHeight=this.imageHeight*scale;// Anchor to bottom of screen (extra height grows upwards)\nconst yOffset=canvasHeight-scaledHeight;// Draw multiple copies to fill the screen and create seamless scrolling\nconst numCopies=Math.ceil(canvasWidth/scaledWidth)+2;for(let i=0;i<numCopies;i++){const x=this.offsetX+i*scaledWidth;ctx.drawImage(this.image,x,yOffset,scaledWidth,scaledHeight);}}/**\n   * Reset background position\n   */reset(){this.offsetX=0;}/**\n   * Update dimensions if window is resized\n   */updateDimensions(_width,_height){// Background scales automatically based on canvas size\n// No additional updates needed\n}}","map":{"version":3,"names":["BACKGROUND_SCROLL_SPEED","BACKGROUND_HEIGHT_SCALE","ScrollingBackground","constructor","imagePath","offsetX","imageWidth","imageHeight","image","imageLoaded","Image","onload","width","height","console","log","concat","onerror","error","src","update","Math","abs","render","ctx","canvasWidth","canvasHeight","scale","scaledWidth","scaledHeight","yOffset","numCopies","ceil","i","x","drawImage","reset","updateDimensions","_width","_height"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/systems/scrollingBackground.ts"],"sourcesContent":["/**\n * Scrolling Background System\n * Handles smooth horizontal scrolling of repeating background image\n */\n\nimport { BACKGROUND_SCROLL_SPEED, BACKGROUND_HEIGHT_SCALE } from '../config/gameConfig';\n\nexport class ScrollingBackground {\n  private offsetX: number = 0;\n  private imageWidth: number = 0;\n  private imageHeight: number = 0;\n  private image: HTMLImageElement | null = null;\n  private imageLoaded: boolean = false;\n\n  constructor(imagePath: string) {\n    this.image = new Image();\n    this.image.onload = () => {\n      this.imageWidth = this.image!.width;\n      this.imageHeight = this.image!.height;\n      this.imageLoaded = true;\n      console.log(`Background image loaded: ${imagePath} (${this.imageWidth}x${this.imageHeight})`);\n    };\n    this.image.onerror = (error) => {\n      console.error(`Failed to load background image: ${imagePath}`, error);\n    };\n    this.image.src = imagePath;\n    console.log(`Loading background image from: ${imagePath}`);\n  }\n\n  /**\n   * Update background offset for scrolling animation\n   */\n  update(): void {\n    if (!this.imageLoaded) return;\n\n    // Move background to the left\n    this.offsetX -= BACKGROUND_SCROLL_SPEED;\n\n    // Reset offset when it reaches the image width for seamless loop\n    if (Math.abs(this.offsetX) >= this.imageWidth) {\n      this.offsetX = 0;\n    }\n  }\n\n  /**\n   * Render the scrolling background\n   */\n  render(ctx: CanvasRenderingContext2D, canvasWidth: number, canvasHeight: number): void {\n    if (!this.imageLoaded || !this.image) return;\n\n    // Calculate scale to fit height with additional height scale factor\n    const scale = (canvasHeight * BACKGROUND_HEIGHT_SCALE) / this.imageHeight;\n    const scaledWidth = this.imageWidth * scale;\n    const scaledHeight = this.imageHeight * scale;\n\n    // Anchor to bottom of screen (extra height grows upwards)\n    const yOffset = canvasHeight - scaledHeight;\n\n    // Draw multiple copies to fill the screen and create seamless scrolling\n    const numCopies = Math.ceil(canvasWidth / scaledWidth) + 2;\n\n    for (let i = 0; i < numCopies; i++) {\n      const x = this.offsetX + (i * scaledWidth);\n      ctx.drawImage(\n        this.image,\n        x,\n        yOffset,\n        scaledWidth,\n        scaledHeight\n      );\n    }\n  }\n\n  /**\n   * Reset background position\n   */\n  reset(): void {\n    this.offsetX = 0;\n  }\n\n  /**\n   * Update dimensions if window is resized\n   */\n  updateDimensions(_width: number, _height: number): void {\n    // Background scales automatically based on canvas size\n    // No additional updates needed\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,GAEA,OAASA,uBAAuB,CAAEC,uBAAuB,KAAQ,sBAAsB,CAEvF,MAAO,MAAM,CAAAC,mBAAoB,CAO/BC,WAAWA,CAACC,SAAiB,CAAE,MANvBC,OAAO,CAAW,CAAC,MACnBC,UAAU,CAAW,CAAC,MACtBC,WAAW,CAAW,CAAC,MACvBC,KAAK,CAA4B,IAAI,MACrCC,WAAW,CAAY,KAAK,CAGlC,IAAI,CAACD,KAAK,CAAG,GAAI,CAAAE,KAAK,CAAC,CAAC,CACxB,IAAI,CAACF,KAAK,CAACG,MAAM,CAAG,IAAM,CACxB,IAAI,CAACL,UAAU,CAAG,IAAI,CAACE,KAAK,CAAEI,KAAK,CACnC,IAAI,CAACL,WAAW,CAAG,IAAI,CAACC,KAAK,CAAEK,MAAM,CACrC,IAAI,CAACJ,WAAW,CAAG,IAAI,CACvBK,OAAO,CAACC,GAAG,6BAAAC,MAAA,CAA6BZ,SAAS,OAAAY,MAAA,CAAK,IAAI,CAACV,UAAU,MAAAU,MAAA,CAAI,IAAI,CAACT,WAAW,KAAG,CAAC,CAC/F,CAAC,CACD,IAAI,CAACC,KAAK,CAACS,OAAO,CAAIC,KAAK,EAAK,CAC9BJ,OAAO,CAACI,KAAK,qCAAAF,MAAA,CAAqCZ,SAAS,EAAIc,KAAK,CAAC,CACvE,CAAC,CACD,IAAI,CAACV,KAAK,CAACW,GAAG,CAAGf,SAAS,CAC1BU,OAAO,CAACC,GAAG,mCAAAC,MAAA,CAAmCZ,SAAS,CAAE,CAAC,CAC5D,CAEA;AACF;AACA,KACEgB,MAAMA,CAAA,CAAS,CACb,GAAI,CAAC,IAAI,CAACX,WAAW,CAAE,OAEvB;AACA,IAAI,CAACJ,OAAO,EAAIL,uBAAuB,CAEvC;AACA,GAAIqB,IAAI,CAACC,GAAG,CAAC,IAAI,CAACjB,OAAO,CAAC,EAAI,IAAI,CAACC,UAAU,CAAE,CAC7C,IAAI,CAACD,OAAO,CAAG,CAAC,CAClB,CACF,CAEA;AACF;AACA,KACEkB,MAAMA,CAACC,GAA6B,CAAEC,WAAmB,CAAEC,YAAoB,CAAQ,CACrF,GAAI,CAAC,IAAI,CAACjB,WAAW,EAAI,CAAC,IAAI,CAACD,KAAK,CAAE,OAEtC;AACA,KAAM,CAAAmB,KAAK,CAAID,YAAY,CAAGzB,uBAAuB,CAAI,IAAI,CAACM,WAAW,CACzE,KAAM,CAAAqB,WAAW,CAAG,IAAI,CAACtB,UAAU,CAAGqB,KAAK,CAC3C,KAAM,CAAAE,YAAY,CAAG,IAAI,CAACtB,WAAW,CAAGoB,KAAK,CAE7C;AACA,KAAM,CAAAG,OAAO,CAAGJ,YAAY,CAAGG,YAAY,CAE3C;AACA,KAAM,CAAAE,SAAS,CAAGV,IAAI,CAACW,IAAI,CAACP,WAAW,CAAGG,WAAW,CAAC,CAAG,CAAC,CAE1D,IAAK,GAAI,CAAAK,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGF,SAAS,CAAEE,CAAC,EAAE,CAAE,CAClC,KAAM,CAAAC,CAAC,CAAG,IAAI,CAAC7B,OAAO,CAAI4B,CAAC,CAAGL,WAAY,CAC1CJ,GAAG,CAACW,SAAS,CACX,IAAI,CAAC3B,KAAK,CACV0B,CAAC,CACDJ,OAAO,CACPF,WAAW,CACXC,YACF,CAAC,CACH,CACF,CAEA;AACF;AACA,KACEO,KAAKA,CAAA,CAAS,CACZ,IAAI,CAAC/B,OAAO,CAAG,CAAC,CAClB,CAEA;AACF;AACA,KACEgC,gBAAgBA,CAACC,MAAc,CAAEC,OAAe,CAAQ,CACtD;AACA;AAAA,CAEJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}