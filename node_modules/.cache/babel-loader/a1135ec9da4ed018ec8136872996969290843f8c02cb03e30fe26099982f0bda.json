{"ast":null,"code":"import _objectSpread from\"/Users/OCSAdmin/Projects/geminiTut/my-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\n * useGameLoop Hook\n * Main game loop that orchestrates all game systems\n */import{useState,useRef,useEffect,useCallback}from'react';import{PlayerPhysics}from'../systems/playerPhysics';import{LaserPhysics}from'../systems/laserPhysics';import{AudioManager,setupAudioUnlock}from'../systems/audioManager';import{BackgroundStars}from'../systems/backgroundStars';import{BALL_SIZE,HITBOX_SIZE,PLAYER_X_POSITION,FLOOR_Y_POSITION,ENEMY_X_POSITION,SCORE_UPDATE_INTERVAL,PLAYER_PROJECTILE_SPEED,PLAYER_PROJECTILE_WIDTH,PLAYER_PROJECTILE_HEIGHT}from'../config/gameConfig';export const useGameLoop=()=>{// Game state\nconst[score,setScore]=useState(0);const[gameOver,setGameOver]=useState(false);const[playerState,setPlayerState]=useState({position:{x:0,y:0},velocity:0,scaleX:1,scaleY:1,hasJumped:false,isHolding:false,holdStartTime:0});const[lasers,setLasers]=useState([]);const[enemyY,setEnemyY]=useState(0);const[enemyScale,setEnemyScale]=useState({scaleX:1,scaleY:1});const[numLasers,setNumLasers]=useState(1);const[wasHit,setWasHit]=useState(false);const[playerProjectiles,setPlayerProjectiles]=useState([]);const[hitCount,setHitCount]=useState(0);// Track hits on enemy ball\n// Game systems\nconst playerPhysicsRef=useRef(null);const laserPhysicsRef=useRef(null);const audioManagerRef=useRef(null);const backgroundStarsRef=useRef(null);// Score tracking\nconst scoreRef=useRef(0);// Dimensions\nconst dimensionsRef=useRef({width:window.innerWidth,height:window.innerHeight,centerY:window.innerHeight*FLOOR_Y_POSITION-HITBOX_SIZE/2,playerStartX:window.innerWidth*PLAYER_X_POSITION-BALL_SIZE/2,enemyX:window.innerWidth*ENEMY_X_POSITION-BALL_SIZE});/**\n   * Initialize game systems\n   */useEffect(()=>{const dims=dimensionsRef.current;// Initialize physics systems\nplayerPhysicsRef.current=new PlayerPhysics(dims.playerStartX,dims.centerY,dims.centerY);laserPhysicsRef.current=new LaserPhysics(dims.width,dims.height,dims.centerY,dims.enemyX);// Initialize audio\naudioManagerRef.current=new AudioManager();const cleanupAudio=setupAudioUnlock(audioManagerRef.current);// Initialize background\nbackgroundStarsRef.current=new BackgroundStars(dims.width,dims.height);// Set initial states\nsetPlayerState(playerPhysicsRef.current.getState());setLasers(laserPhysicsRef.current.getLasers());setEnemyY(laserPhysicsRef.current.getEnemyY());return()=>{var _audioManagerRef$curr;cleanupAudio();(_audioManagerRef$curr=audioManagerRef.current)===null||_audioManagerRef$curr===void 0?void 0:_audioManagerRef$curr.dispose();};},[]);/**\n   * Update score display periodically\n   */useEffect(()=>{const interval=setInterval(()=>{setScore(scoreRef.current);},SCORE_UPDATE_INTERVAL);return()=>clearInterval(interval);},[]);/**\n   * Handle window resize\n   */useEffect(()=>{const handleResize=()=>{var _playerPhysicsRef$cur,_laserPhysicsRef$curr,_backgroundStarsRef$c;const dims=dimensionsRef.current;dims.width=window.innerWidth;dims.height=window.innerHeight;dims.centerY=window.innerHeight*FLOOR_Y_POSITION-HITBOX_SIZE/2;dims.playerStartX=window.innerWidth*PLAYER_X_POSITION-BALL_SIZE/2;dims.enemyX=window.innerWidth*ENEMY_X_POSITION-BALL_SIZE;(_playerPhysicsRef$cur=playerPhysicsRef.current)===null||_playerPhysicsRef$cur===void 0?void 0:_playerPhysicsRef$cur.updateCenterY(dims.centerY);(_laserPhysicsRef$curr=laserPhysicsRef.current)===null||_laserPhysicsRef$curr===void 0?void 0:_laserPhysicsRef$curr.updateDimensions(dims.width,dims.height,dims.centerY,dims.enemyX);(_backgroundStarsRef$c=backgroundStarsRef.current)===null||_backgroundStarsRef$c===void 0?void 0:_backgroundStarsRef$c.updateDimensions(dims.width,dims.height);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);/**\n   * Main game loop\n   */useEffect(()=>{if(gameOver)return;let animationFrameId;const loop=()=>{var _backgroundStarsRef$c2,_laserPhysicsRef$curr2,_laserPhysicsRef$curr3,_playerPhysicsRef$cur2,_laserPhysicsRef$curr4,_playerPhysicsRef$cur4;// Update background\n(_backgroundStarsRef$c2=backgroundStarsRef.current)===null||_backgroundStarsRef$c2===void 0?void 0:_backgroundStarsRef$c2.update();// Update laser count based on score\n(_laserPhysicsRef$curr2=laserPhysicsRef.current)===null||_laserPhysicsRef$curr2===void 0?void 0:_laserPhysicsRef$curr2.updateLaserCount(scoreRef.current);setNumLasers(((_laserPhysicsRef$curr3=laserPhysicsRef.current)===null||_laserPhysicsRef$curr3===void 0?void 0:_laserPhysicsRef$curr3.getNumLasers())||1);// Update player physics\nconst newPlayerState=(_playerPhysicsRef$cur2=playerPhysicsRef.current)===null||_playerPhysicsRef$cur2===void 0?void 0:_playerPhysicsRef$cur2.update();if(newPlayerState){var _playerPhysicsRef$cur3;setPlayerState(newPlayerState);// Check if bounce sound should play\nif((_playerPhysicsRef$cur3=playerPhysicsRef.current)!==null&&_playerPhysicsRef$cur3!==void 0&&_playerPhysicsRef$cur3.shouldPlayBounceSound()){var _audioManagerRef$curr2;const volume=playerPhysicsRef.current.getBounceVolume();(_audioManagerRef$curr2=audioManagerRef.current)===null||_audioManagerRef$curr2===void 0?void 0:_audioManagerRef$curr2.playBounce(volume);}}// Update lasers\nconst laserUpdate=(_laserPhysicsRef$curr4=laserPhysicsRef.current)===null||_laserPhysicsRef$curr4===void 0?void 0:_laserPhysicsRef$curr4.update(scoreRef.current,(newPlayerState===null||newPlayerState===void 0?void 0:newPlayerState.position)||{x:0,y:0},((_playerPhysicsRef$cur4=playerPhysicsRef.current)===null||_playerPhysicsRef$cur4===void 0?void 0:_playerPhysicsRef$cur4.hasPlayerJumped())||false);if(laserUpdate&&laserPhysicsRef.current){// Update score\nscoreRef.current+=laserUpdate.scoreChange;// Check for hit\nif(laserUpdate.wasHit){var _audioManagerRef$curr3;setWasHit(true);(_audioManagerRef$curr3=audioManagerRef.current)===null||_audioManagerRef$curr3===void 0?void 0:_audioManagerRef$curr3.playLaserHit();// Play laser hit sound\nsetTimeout(()=>setWasHit(false),250);}// Update enemy position and scale (now handled internally by LaserPhysics)\nsetEnemyY(laserPhysicsRef.current.getEnemyY());setEnemyScale(laserPhysicsRef.current.getEnemyScale());// Update laser positions\nsetLasers([...laserPhysicsRef.current.getLasers()]);}// Update player projectiles (score 200+)\nif(scoreRef.current>=200){setPlayerProjectiles(prev=>{return prev.map(projectile=>{var _laserPhysicsRef$curr5;if(!projectile.active)return projectile;// Move projectile to the right\nconst newX=projectile.x+PLAYER_PROJECTILE_SPEED;// Check collision with enemy ball\nconst dims=dimensionsRef.current;const enemyCurrentY=((_laserPhysicsRef$curr5=laserPhysicsRef.current)===null||_laserPhysicsRef$curr5===void 0?void 0:_laserPhysicsRef$curr5.getEnemyY())||0;const hitEnemy=newX+PLAYER_PROJECTILE_WIDTH>dims.enemyX&&newX<dims.enemyX+BALL_SIZE&&projectile.y+PLAYER_PROJECTILE_HEIGHT>enemyCurrentY&&projectile.y<enemyCurrentY+BALL_SIZE;if(hitEnemy){// Hit detected! Increment hit counter\nsetHitCount(prevHit=>prevHit+1);return _objectSpread(_objectSpread({},projectile),{},{active:false});}// Deactivate if off screen\nif(newX>dims.width){return _objectSpread(_objectSpread({},projectile),{},{active:false});}return _objectSpread(_objectSpread({},projectile),{},{x:newX});}).filter(p=>p.active);// Remove inactive projectiles\n});}// Check game over\nif(scoreRef.current<0){setGameOver(true);return;}animationFrameId=requestAnimationFrame(loop);};animationFrameId=requestAnimationFrame(loop);return()=>{if(animationFrameId){cancelAnimationFrame(animationFrameId);}};},[gameOver]);/**\n   * Handle jump start\n   */const handleJumpStart=useCallback(()=>{var _audioManagerRef$curr4,_audioManagerRef$curr5,_playerPhysicsRef$cur5;if(gameOver)return;// Initialize audio on first interaction\n(_audioManagerRef$curr4=audioManagerRef.current)===null||_audioManagerRef$curr4===void 0?void 0:_audioManagerRef$curr4.initialize();// Play jump sound only once per press\n(_audioManagerRef$curr5=audioManagerRef.current)===null||_audioManagerRef$curr5===void 0?void 0:_audioManagerRef$curr5.playJumpSound();(_playerPhysicsRef$cur5=playerPhysicsRef.current)===null||_playerPhysicsRef$cur5===void 0?void 0:_playerPhysicsRef$cur5.startJump();},[gameOver]);/**\n   * Handle jump end\n   */const handleJumpEnd=useCallback(()=>{var _playerPhysicsRef$cur6,_audioManagerRef$curr6;if(gameOver)return;(_playerPhysicsRef$cur6=playerPhysicsRef.current)===null||_playerPhysicsRef$cur6===void 0?void 0:_playerPhysicsRef$cur6.endJump();// Reset jump sound flag so it can play again on next press\n(_audioManagerRef$curr6=audioManagerRef.current)===null||_audioManagerRef$curr6===void 0?void 0:_audioManagerRef$curr6.resetJumpSound();},[gameOver]);/**\n   * Handle mouse/trackpad movement\n   */const handleMouseMove=useCallback(event=>{var _playerPhysicsRef$cur7;if(gameOver)return;const dims=dimensionsRef.current;(_playerPhysicsRef$cur7=playerPhysicsRef.current)===null||_playerPhysicsRef$cur7===void 0?void 0:_playerPhysicsRef$cur7.setMousePosition(event.clientX,dims.width);},[gameOver]);/**\n   * Handle touch movement (iPad/mobile)\n   */const handleTouchMove=useCallback(event=>{if(gameOver)return;if(event.touches.length>0){var _playerPhysicsRef$cur8;const dims=dimensionsRef.current;const touch=event.touches[0];(_playerPhysicsRef$cur8=playerPhysicsRef.current)===null||_playerPhysicsRef$cur8===void 0?void 0:_playerPhysicsRef$cur8.setMousePosition(touch.clientX,dims.width);}},[gameOver]);/**\n   * Handle shooting (score 200+, triggered by 'S' key or double-tap)\n   */const handleShoot=useCallback(()=>{var _playerPhysicsRef$cur9;if(gameOver||scoreRef.current<200)return;const currentPlayerState=(_playerPhysicsRef$cur9=playerPhysicsRef.current)===null||_playerPhysicsRef$cur9===void 0?void 0:_playerPhysicsRef$cur9.getState();if(!currentPlayerState)return;// Create projectile from center of player ball\nconst newProjectile={x:currentPlayerState.position.x+BALL_SIZE/2,y:currentPlayerState.position.y+BALL_SIZE/2-PLAYER_PROJECTILE_HEIGHT/2,active:true};setPlayerProjectiles(prev=>[...prev,newProjectile]);},[gameOver]);/**\n   * Restart game\n   */const handleRestart=useCallback(()=>{var _playerPhysicsRef$cur0,_laserPhysicsRef$curr6,_backgroundStarsRef$c3,_playerPhysicsRef$cur1,_laserPhysicsRef$curr7,_laserPhysicsRef$curr8;const dims=dimensionsRef.current;// Reset score\nscoreRef.current=0;setScore(0);// Reset systems\n(_playerPhysicsRef$cur0=playerPhysicsRef.current)===null||_playerPhysicsRef$cur0===void 0?void 0:_playerPhysicsRef$cur0.reset(dims.playerStartX,dims.centerY);(_laserPhysicsRef$curr6=laserPhysicsRef.current)===null||_laserPhysicsRef$curr6===void 0?void 0:_laserPhysicsRef$curr6.reset();(_backgroundStarsRef$c3=backgroundStarsRef.current)===null||_backgroundStarsRef$c3===void 0?void 0:_backgroundStarsRef$c3.reset();// Reset state\nsetPlayerState(((_playerPhysicsRef$cur1=playerPhysicsRef.current)===null||_playerPhysicsRef$cur1===void 0?void 0:_playerPhysicsRef$cur1.getState())||playerState);setLasers(((_laserPhysicsRef$curr7=laserPhysicsRef.current)===null||_laserPhysicsRef$curr7===void 0?void 0:_laserPhysicsRef$curr7.getLasers())||[]);setEnemyY(((_laserPhysicsRef$curr8=laserPhysicsRef.current)===null||_laserPhysicsRef$curr8===void 0?void 0:_laserPhysicsRef$curr8.getEnemyY())||dims.centerY);setNumLasers(1);setGameOver(false);setWasHit(false);setPlayerProjectiles([]);setHitCount(0);},[playerState]);return{// State\nscore,gameOver,hitCount,playerState,lasers,enemyY,enemyScale,numLasers,wasHit,playerProjectiles,dimensions:dimensionsRef.current,// Systems\nbackgroundStars:backgroundStarsRef.current,// Handlers\nhandleJumpStart,handleJumpEnd,handleMouseMove,handleTouchMove,handleShoot,handleRestart};};","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","PlayerPhysics","LaserPhysics","AudioManager","setupAudioUnlock","BackgroundStars","BALL_SIZE","HITBOX_SIZE","PLAYER_X_POSITION","FLOOR_Y_POSITION","ENEMY_X_POSITION","SCORE_UPDATE_INTERVAL","PLAYER_PROJECTILE_SPEED","PLAYER_PROJECTILE_WIDTH","PLAYER_PROJECTILE_HEIGHT","useGameLoop","score","setScore","gameOver","setGameOver","playerState","setPlayerState","position","x","y","velocity","scaleX","scaleY","hasJumped","isHolding","holdStartTime","lasers","setLasers","enemyY","setEnemyY","enemyScale","setEnemyScale","numLasers","setNumLasers","wasHit","setWasHit","playerProjectiles","setPlayerProjectiles","hitCount","setHitCount","playerPhysicsRef","laserPhysicsRef","audioManagerRef","backgroundStarsRef","scoreRef","dimensionsRef","width","window","innerWidth","height","innerHeight","centerY","playerStartX","enemyX","dims","current","cleanupAudio","getState","getLasers","getEnemyY","_audioManagerRef$curr","dispose","interval","setInterval","clearInterval","handleResize","_playerPhysicsRef$cur","_laserPhysicsRef$curr","_backgroundStarsRef$c","updateCenterY","updateDimensions","addEventListener","removeEventListener","animationFrameId","loop","_backgroundStarsRef$c2","_laserPhysicsRef$curr2","_laserPhysicsRef$curr3","_playerPhysicsRef$cur2","_laserPhysicsRef$curr4","_playerPhysicsRef$cur4","update","updateLaserCount","getNumLasers","newPlayerState","_playerPhysicsRef$cur3","shouldPlayBounceSound","_audioManagerRef$curr2","volume","getBounceVolume","playBounce","laserUpdate","hasPlayerJumped","scoreChange","_audioManagerRef$curr3","playLaserHit","setTimeout","getEnemyScale","prev","map","projectile","_laserPhysicsRef$curr5","active","newX","enemyCurrentY","hitEnemy","prevHit","_objectSpread","filter","p","requestAnimationFrame","cancelAnimationFrame","handleJumpStart","_audioManagerRef$curr4","_audioManagerRef$curr5","_playerPhysicsRef$cur5","initialize","playJumpSound","startJump","handleJumpEnd","_playerPhysicsRef$cur6","_audioManagerRef$curr6","endJump","resetJumpSound","handleMouseMove","event","_playerPhysicsRef$cur7","setMousePosition","clientX","handleTouchMove","touches","length","_playerPhysicsRef$cur8","touch","handleShoot","_playerPhysicsRef$cur9","currentPlayerState","newProjectile","handleRestart","_playerPhysicsRef$cur0","_laserPhysicsRef$curr6","_backgroundStarsRef$c3","_playerPhysicsRef$cur1","_laserPhysicsRef$curr7","_laserPhysicsRef$curr8","reset","dimensions","backgroundStars"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/hooks/useGameLoop.ts"],"sourcesContent":["/**\n * useGameLoop Hook\n * Main game loop that orchestrates all game systems\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { PlayerPhysics } from '../systems/playerPhysics';\nimport { LaserPhysics } from '../systems/laserPhysics';\nimport { AudioManager, setupAudioUnlock } from '../systems/audioManager';\nimport { BackgroundStars } from '../systems/backgroundStars';\nimport { PlayerState, LaserState, PlayerProjectile } from '../types/game';\nimport {\n  BALL_SIZE,\n  HITBOX_SIZE,\n  PLAYER_X_POSITION,\n  FLOOR_Y_POSITION,\n  ENEMY_X_POSITION,\n  SCORE_UPDATE_INTERVAL,\n  PLAYER_PROJECTILE_SPEED,\n  PLAYER_PROJECTILE_WIDTH,\n  PLAYER_PROJECTILE_HEIGHT,\n} from '../config/gameConfig';\n\nexport const useGameLoop = () => {\n  // Game state\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [playerState, setPlayerState] = useState<PlayerState>({\n    position: { x: 0, y: 0 },\n    velocity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    hasJumped: false,\n    isHolding: false,\n    holdStartTime: 0,\n  });\n  const [lasers, setLasers] = useState<LaserState[]>([]);\n  const [enemyY, setEnemyY] = useState(0);\n  const [enemyScale, setEnemyScale] = useState({ scaleX: 1, scaleY: 1 });\n  const [numLasers, setNumLasers] = useState(1);\n  const [wasHit, setWasHit] = useState(false);\n  const [playerProjectiles, setPlayerProjectiles] = useState<PlayerProjectile[]>([]);\n  const [hitCount, setHitCount] = useState(0); // Track hits on enemy ball\n\n  // Game systems\n  const playerPhysicsRef = useRef<PlayerPhysics | null>(null);\n  const laserPhysicsRef = useRef<LaserPhysics | null>(null);\n  const audioManagerRef = useRef<AudioManager | null>(null);\n  const backgroundStarsRef = useRef<BackgroundStars | null>(null);\n\n  // Score tracking\n  const scoreRef = useRef(0);\n\n  // Dimensions\n  const dimensionsRef = useRef({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    centerY: window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2,\n    playerStartX: window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2,\n    enemyX: window.innerWidth * ENEMY_X_POSITION - BALL_SIZE,\n  });\n\n  /**\n   * Initialize game systems\n   */\n  useEffect(() => {\n    const dims = dimensionsRef.current;\n\n    // Initialize physics systems\n    playerPhysicsRef.current = new PlayerPhysics(\n      dims.playerStartX,\n      dims.centerY,\n      dims.centerY\n    );\n\n    laserPhysicsRef.current = new LaserPhysics(\n      dims.width,\n      dims.height,\n      dims.centerY,\n      dims.enemyX\n    );\n\n    // Initialize audio\n    audioManagerRef.current = new AudioManager();\n    const cleanupAudio = setupAudioUnlock(audioManagerRef.current);\n\n    // Initialize background\n    backgroundStarsRef.current = new BackgroundStars(dims.width, dims.height);\n\n    // Set initial states\n    setPlayerState(playerPhysicsRef.current.getState());\n    setLasers(laserPhysicsRef.current.getLasers());\n    setEnemyY(laserPhysicsRef.current.getEnemyY());\n\n    return () => {\n      cleanupAudio();\n      audioManagerRef.current?.dispose();\n    };\n  }, []);\n\n  /**\n   * Update score display periodically\n   */\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setScore(scoreRef.current);\n    }, SCORE_UPDATE_INTERVAL);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  /**\n   * Handle window resize\n   */\n  useEffect(() => {\n    const handleResize = () => {\n      const dims = dimensionsRef.current;\n      dims.width = window.innerWidth;\n      dims.height = window.innerHeight;\n      dims.centerY = window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2;\n      dims.playerStartX = window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2;\n      dims.enemyX = window.innerWidth * ENEMY_X_POSITION - BALL_SIZE;\n\n      playerPhysicsRef.current?.updateCenterY(dims.centerY);\n      laserPhysicsRef.current?.updateDimensions(dims.width, dims.height, dims.centerY, dims.enemyX);\n      backgroundStarsRef.current?.updateDimensions(dims.width, dims.height);\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  /**\n   * Main game loop\n   */\n  useEffect(() => {\n    if (gameOver) return;\n\n    let animationFrameId: number;\n\n    const loop = () => {\n      // Update background\n      backgroundStarsRef.current?.update();\n\n      // Update laser count based on score\n      laserPhysicsRef.current?.updateLaserCount(scoreRef.current);\n      setNumLasers(laserPhysicsRef.current?.getNumLasers() || 1);\n\n      // Update player physics\n      const newPlayerState = playerPhysicsRef.current?.update();\n      if (newPlayerState) {\n        setPlayerState(newPlayerState);\n\n        // Check if bounce sound should play\n        if (playerPhysicsRef.current?.shouldPlayBounceSound()) {\n          const volume = playerPhysicsRef.current.getBounceVolume();\n          audioManagerRef.current?.playBounce(volume);\n        }\n      }\n\n      // Update lasers\n      const laserUpdate = laserPhysicsRef.current?.update(\n        scoreRef.current,\n        newPlayerState?.position || { x: 0, y: 0 },\n        playerPhysicsRef.current?.hasPlayerJumped() || false\n      );\n\n      if (laserUpdate && laserPhysicsRef.current) {\n        // Update score\n        scoreRef.current += laserUpdate.scoreChange;\n\n        // Check for hit\n        if (laserUpdate.wasHit) {\n          setWasHit(true);\n          audioManagerRef.current?.playLaserHit(); // Play laser hit sound\n          setTimeout(() => setWasHit(false), 250);\n        }\n\n        // Update enemy position and scale (now handled internally by LaserPhysics)\n        setEnemyY(laserPhysicsRef.current.getEnemyY());\n        setEnemyScale(laserPhysicsRef.current.getEnemyScale());\n\n          // Update laser positions\n        setLasers([...laserPhysicsRef.current.getLasers()]);\n      }\n\n      // Update player projectiles (score 200+)\n      if (scoreRef.current >= 200) {\n        setPlayerProjectiles((prev) => {\n          return prev\n            .map((projectile) => {\n              if (!projectile.active) return projectile;\n\n              // Move projectile to the right\n              const newX = projectile.x + PLAYER_PROJECTILE_SPEED;\n\n              // Check collision with enemy ball\n              const dims = dimensionsRef.current;\n              const enemyCurrentY = laserPhysicsRef.current?.getEnemyY() || 0;\n              const hitEnemy =\n                newX + PLAYER_PROJECTILE_WIDTH > dims.enemyX &&\n                newX < dims.enemyX + BALL_SIZE &&\n                projectile.y + PLAYER_PROJECTILE_HEIGHT > enemyCurrentY &&\n                projectile.y < enemyCurrentY + BALL_SIZE;\n\n              if (hitEnemy) {\n                // Hit detected! Increment hit counter\n                setHitCount((prevHit) => prevHit + 1);\n                return { ...projectile, active: false };\n              }\n\n              // Deactivate if off screen\n              if (newX > dims.width) {\n                return { ...projectile, active: false };\n              }\n\n              return { ...projectile, x: newX };\n            })\n            .filter((p) => p.active); // Remove inactive projectiles\n        });\n      }\n\n      // Check game over\n      if (scoreRef.current < 0) {\n        setGameOver(true);\n        return;\n      }\n\n      animationFrameId = requestAnimationFrame(loop);\n    };\n\n    animationFrameId = requestAnimationFrame(loop);\n\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [gameOver]);\n\n  /**\n   * Handle jump start\n   */\n  const handleJumpStart = useCallback(() => {\n    if (gameOver) return;\n\n    // Initialize audio on first interaction\n    audioManagerRef.current?.initialize();\n    // Play jump sound only once per press\n    audioManagerRef.current?.playJumpSound();\n\n    playerPhysicsRef.current?.startJump();\n  }, [gameOver]);\n\n  /**\n   * Handle jump end\n   */\n  const handleJumpEnd = useCallback(() => {\n    if (gameOver) return;\n    playerPhysicsRef.current?.endJump();\n    // Reset jump sound flag so it can play again on next press\n    audioManagerRef.current?.resetJumpSound();\n  }, [gameOver]);\n\n  /**\n   * Handle mouse/trackpad movement\n   */\n  const handleMouseMove = useCallback((event: MouseEvent) => {\n    if (gameOver) return;\n    const dims = dimensionsRef.current;\n    playerPhysicsRef.current?.setMousePosition(event.clientX, dims.width);\n  }, [gameOver]);\n\n  /**\n   * Handle touch movement (iPad/mobile)\n   */\n  const handleTouchMove = useCallback((event: TouchEvent) => {\n    if (gameOver) return;\n    if (event.touches.length > 0) {\n      const dims = dimensionsRef.current;\n      const touch = event.touches[0];\n      playerPhysicsRef.current?.setMousePosition(touch.clientX, dims.width);\n    }\n  }, [gameOver]);\n\n  /**\n   * Handle shooting (score 200+, triggered by 'S' key or double-tap)\n   */\n  const handleShoot = useCallback(() => {\n    if (gameOver || scoreRef.current < 200) return;\n\n    const currentPlayerState = playerPhysicsRef.current?.getState();\n    if (!currentPlayerState) return;\n\n    // Create projectile from center of player ball\n    const newProjectile: PlayerProjectile = {\n      x: currentPlayerState.position.x + BALL_SIZE / 2,\n      y: currentPlayerState.position.y + BALL_SIZE / 2 - PLAYER_PROJECTILE_HEIGHT / 2,\n      active: true,\n    };\n\n    setPlayerProjectiles((prev) => [...prev, newProjectile]);\n  }, [gameOver]);\n\n  /**\n   * Restart game\n   */\n  const handleRestart = useCallback(() => {\n    const dims = dimensionsRef.current;\n\n    // Reset score\n    scoreRef.current = 0;\n    setScore(0);\n\n    // Reset systems\n    playerPhysicsRef.current?.reset(dims.playerStartX, dims.centerY);\n    laserPhysicsRef.current?.reset();\n    backgroundStarsRef.current?.reset();\n\n    // Reset state\n    setPlayerState(playerPhysicsRef.current?.getState() || playerState);\n    setLasers(laserPhysicsRef.current?.getLasers() || []);\n    setEnemyY(laserPhysicsRef.current?.getEnemyY() || dims.centerY);\n    setNumLasers(1);\n    setGameOver(false);\n    setWasHit(false);\n    setPlayerProjectiles([]);\n    setHitCount(0);\n  }, [playerState]);\n\n  return {\n    // State\n    score,\n    gameOver,\n    hitCount,\n    playerState,\n    lasers,\n    enemyY,\n    enemyScale,\n    numLasers,\n    wasHit,\n    playerProjectiles,\n    dimensions: dimensionsRef.current,\n\n    // Systems\n    backgroundStars: backgroundStarsRef.current,\n\n    // Handlers\n    handleJumpStart,\n    handleJumpEnd,\n    handleMouseMove,\n    handleTouchMove,\n    handleShoot,\n    handleRestart,\n  };\n};\n"],"mappings":"oIAAA;AACA;AACA;AACA,GAEA,OAASA,QAAQ,CAAEC,MAAM,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAChE,OAASC,aAAa,KAAQ,0BAA0B,CACxD,OAASC,YAAY,KAAQ,yBAAyB,CACtD,OAASC,YAAY,CAAEC,gBAAgB,KAAQ,yBAAyB,CACxE,OAASC,eAAe,KAAQ,4BAA4B,CAE5D,OACEC,SAAS,CACTC,WAAW,CACXC,iBAAiB,CACjBC,gBAAgB,CAChBC,gBAAgB,CAChBC,qBAAqB,CACrBC,uBAAuB,CACvBC,uBAAuB,CACvBC,wBAAwB,KACnB,sBAAsB,CAE7B,MAAO,MAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CAC/B;AACA,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAACqB,QAAQ,CAAEC,WAAW,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACuB,WAAW,CAAEC,cAAc,CAAC,CAAGxB,QAAQ,CAAc,CAC1DyB,QAAQ,CAAE,CAAEC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CACxBC,QAAQ,CAAE,CAAC,CACXC,MAAM,CAAE,CAAC,CACTC,MAAM,CAAE,CAAC,CACTC,SAAS,CAAE,KAAK,CAChBC,SAAS,CAAE,KAAK,CAChBC,aAAa,CAAE,CACjB,CAAC,CAAC,CACF,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGnC,QAAQ,CAAe,EAAE,CAAC,CACtD,KAAM,CAACoC,MAAM,CAAEC,SAAS,CAAC,CAAGrC,QAAQ,CAAC,CAAC,CAAC,CACvC,KAAM,CAACsC,UAAU,CAAEC,aAAa,CAAC,CAAGvC,QAAQ,CAAC,CAAE6B,MAAM,CAAE,CAAC,CAAEC,MAAM,CAAE,CAAE,CAAC,CAAC,CACtE,KAAM,CAACU,SAAS,CAAEC,YAAY,CAAC,CAAGzC,QAAQ,CAAC,CAAC,CAAC,CAC7C,KAAM,CAAC0C,MAAM,CAAEC,SAAS,CAAC,CAAG3C,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAAC4C,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG7C,QAAQ,CAAqB,EAAE,CAAC,CAClF,KAAM,CAAC8C,QAAQ,CAAEC,WAAW,CAAC,CAAG/C,QAAQ,CAAC,CAAC,CAAC,CAAE;AAE7C;AACA,KAAM,CAAAgD,gBAAgB,CAAG/C,MAAM,CAAuB,IAAI,CAAC,CAC3D,KAAM,CAAAgD,eAAe,CAAGhD,MAAM,CAAsB,IAAI,CAAC,CACzD,KAAM,CAAAiD,eAAe,CAAGjD,MAAM,CAAsB,IAAI,CAAC,CACzD,KAAM,CAAAkD,kBAAkB,CAAGlD,MAAM,CAAyB,IAAI,CAAC,CAE/D;AACA,KAAM,CAAAmD,QAAQ,CAAGnD,MAAM,CAAC,CAAC,CAAC,CAE1B;AACA,KAAM,CAAAoD,aAAa,CAAGpD,MAAM,CAAC,CAC3BqD,KAAK,CAAEC,MAAM,CAACC,UAAU,CACxBC,MAAM,CAAEF,MAAM,CAACG,WAAW,CAC1BC,OAAO,CAAEJ,MAAM,CAACG,WAAW,CAAG9C,gBAAgB,CAAGF,WAAW,CAAG,CAAC,CAChEkD,YAAY,CAAEL,MAAM,CAACC,UAAU,CAAG7C,iBAAiB,CAAGF,SAAS,CAAG,CAAC,CACnEoD,MAAM,CAAEN,MAAM,CAACC,UAAU,CAAG3C,gBAAgB,CAAGJ,SACjD,CAAC,CAAC,CAEF;AACF;AACA,KACEP,SAAS,CAAC,IAAM,CACd,KAAM,CAAA4D,IAAI,CAAGT,aAAa,CAACU,OAAO,CAElC;AACAf,gBAAgB,CAACe,OAAO,CAAG,GAAI,CAAA3D,aAAa,CAC1C0D,IAAI,CAACF,YAAY,CACjBE,IAAI,CAACH,OAAO,CACZG,IAAI,CAACH,OACP,CAAC,CAEDV,eAAe,CAACc,OAAO,CAAG,GAAI,CAAA1D,YAAY,CACxCyD,IAAI,CAACR,KAAK,CACVQ,IAAI,CAACL,MAAM,CACXK,IAAI,CAACH,OAAO,CACZG,IAAI,CAACD,MACP,CAAC,CAED;AACAX,eAAe,CAACa,OAAO,CAAG,GAAI,CAAAzD,YAAY,CAAC,CAAC,CAC5C,KAAM,CAAA0D,YAAY,CAAGzD,gBAAgB,CAAC2C,eAAe,CAACa,OAAO,CAAC,CAE9D;AACAZ,kBAAkB,CAACY,OAAO,CAAG,GAAI,CAAAvD,eAAe,CAACsD,IAAI,CAACR,KAAK,CAAEQ,IAAI,CAACL,MAAM,CAAC,CAEzE;AACAjC,cAAc,CAACwB,gBAAgB,CAACe,OAAO,CAACE,QAAQ,CAAC,CAAC,CAAC,CACnD9B,SAAS,CAACc,eAAe,CAACc,OAAO,CAACG,SAAS,CAAC,CAAC,CAAC,CAC9C7B,SAAS,CAACY,eAAe,CAACc,OAAO,CAACI,SAAS,CAAC,CAAC,CAAC,CAE9C,MAAO,IAAM,KAAAC,qBAAA,CACXJ,YAAY,CAAC,CAAC,CACd,CAAAI,qBAAA,CAAAlB,eAAe,CAACa,OAAO,UAAAK,qBAAA,iBAAvBA,qBAAA,CAAyBC,OAAO,CAAC,CAAC,CACpC,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACF;AACA,KACEnE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoE,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjCnD,QAAQ,CAACgC,QAAQ,CAACW,OAAO,CAAC,CAC5B,CAAC,CAAEjD,qBAAqB,CAAC,CAEzB,MAAO,IAAM0D,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN;AACF;AACA,KACEpE,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuE,YAAY,CAAGA,CAAA,GAAM,KAAAC,qBAAA,CAAAC,qBAAA,CAAAC,qBAAA,CACzB,KAAM,CAAAd,IAAI,CAAGT,aAAa,CAACU,OAAO,CAClCD,IAAI,CAACR,KAAK,CAAGC,MAAM,CAACC,UAAU,CAC9BM,IAAI,CAACL,MAAM,CAAGF,MAAM,CAACG,WAAW,CAChCI,IAAI,CAACH,OAAO,CAAGJ,MAAM,CAACG,WAAW,CAAG9C,gBAAgB,CAAGF,WAAW,CAAG,CAAC,CACtEoD,IAAI,CAACF,YAAY,CAAGL,MAAM,CAACC,UAAU,CAAG7C,iBAAiB,CAAGF,SAAS,CAAG,CAAC,CACzEqD,IAAI,CAACD,MAAM,CAAGN,MAAM,CAACC,UAAU,CAAG3C,gBAAgB,CAAGJ,SAAS,CAE9D,CAAAiE,qBAAA,CAAA1B,gBAAgB,CAACe,OAAO,UAAAW,qBAAA,iBAAxBA,qBAAA,CAA0BG,aAAa,CAACf,IAAI,CAACH,OAAO,CAAC,CACrD,CAAAgB,qBAAA,CAAA1B,eAAe,CAACc,OAAO,UAAAY,qBAAA,iBAAvBA,qBAAA,CAAyBG,gBAAgB,CAAChB,IAAI,CAACR,KAAK,CAAEQ,IAAI,CAACL,MAAM,CAAEK,IAAI,CAACH,OAAO,CAAEG,IAAI,CAACD,MAAM,CAAC,CAC7F,CAAAe,qBAAA,CAAAzB,kBAAkB,CAACY,OAAO,UAAAa,qBAAA,iBAA1BA,qBAAA,CAA4BE,gBAAgB,CAAChB,IAAI,CAACR,KAAK,CAAEQ,IAAI,CAACL,MAAM,CAAC,CACvE,CAAC,CAEDF,MAAM,CAACwB,gBAAgB,CAAC,QAAQ,CAAEN,YAAY,CAAC,CAC/C,MAAO,IAAMlB,MAAM,CAACyB,mBAAmB,CAAC,QAAQ,CAAEP,YAAY,CAAC,CACjE,CAAC,CAAE,EAAE,CAAC,CAEN;AACF;AACA,KACEvE,SAAS,CAAC,IAAM,CACd,GAAImB,QAAQ,CAAE,OAEd,GAAI,CAAA4D,gBAAwB,CAE5B,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,KAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CACjB;AACA,CAAAL,sBAAA,CAAAhC,kBAAkB,CAACY,OAAO,UAAAoB,sBAAA,iBAA1BA,sBAAA,CAA4BM,MAAM,CAAC,CAAC,CAEpC;AACA,CAAAL,sBAAA,CAAAnC,eAAe,CAACc,OAAO,UAAAqB,sBAAA,iBAAvBA,sBAAA,CAAyBM,gBAAgB,CAACtC,QAAQ,CAACW,OAAO,CAAC,CAC3DtB,YAAY,CAAC,EAAA4C,sBAAA,CAAApC,eAAe,CAACc,OAAO,UAAAsB,sBAAA,iBAAvBA,sBAAA,CAAyBM,YAAY,CAAC,CAAC,GAAI,CAAC,CAAC,CAE1D;AACA,KAAM,CAAAC,cAAc,EAAAN,sBAAA,CAAGtC,gBAAgB,CAACe,OAAO,UAAAuB,sBAAA,iBAAxBA,sBAAA,CAA0BG,MAAM,CAAC,CAAC,CACzD,GAAIG,cAAc,CAAE,KAAAC,sBAAA,CAClBrE,cAAc,CAACoE,cAAc,CAAC,CAE9B;AACA,IAAAC,sBAAA,CAAI7C,gBAAgB,CAACe,OAAO,UAAA8B,sBAAA,WAAxBA,sBAAA,CAA0BC,qBAAqB,CAAC,CAAC,CAAE,KAAAC,sBAAA,CACrD,KAAM,CAAAC,MAAM,CAAGhD,gBAAgB,CAACe,OAAO,CAACkC,eAAe,CAAC,CAAC,CACzD,CAAAF,sBAAA,CAAA7C,eAAe,CAACa,OAAO,UAAAgC,sBAAA,iBAAvBA,sBAAA,CAAyBG,UAAU,CAACF,MAAM,CAAC,CAC7C,CACF,CAEA;AACA,KAAM,CAAAG,WAAW,EAAAZ,sBAAA,CAAGtC,eAAe,CAACc,OAAO,UAAAwB,sBAAA,iBAAvBA,sBAAA,CAAyBE,MAAM,CACjDrC,QAAQ,CAACW,OAAO,CAChB,CAAA6B,cAAc,SAAdA,cAAc,iBAAdA,cAAc,CAAEnE,QAAQ,GAAI,CAAEC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAC1C,EAAA6D,sBAAA,CAAAxC,gBAAgB,CAACe,OAAO,UAAAyB,sBAAA,iBAAxBA,sBAAA,CAA0BY,eAAe,CAAC,CAAC,GAAI,KACjD,CAAC,CAED,GAAID,WAAW,EAAIlD,eAAe,CAACc,OAAO,CAAE,CAC1C;AACAX,QAAQ,CAACW,OAAO,EAAIoC,WAAW,CAACE,WAAW,CAE3C;AACA,GAAIF,WAAW,CAACzD,MAAM,CAAE,KAAA4D,sBAAA,CACtB3D,SAAS,CAAC,IAAI,CAAC,CACf,CAAA2D,sBAAA,CAAApD,eAAe,CAACa,OAAO,UAAAuC,sBAAA,iBAAvBA,sBAAA,CAAyBC,YAAY,CAAC,CAAC,CAAE;AACzCC,UAAU,CAAC,IAAM7D,SAAS,CAAC,KAAK,CAAC,CAAE,GAAG,CAAC,CACzC,CAEA;AACAN,SAAS,CAACY,eAAe,CAACc,OAAO,CAACI,SAAS,CAAC,CAAC,CAAC,CAC9C5B,aAAa,CAACU,eAAe,CAACc,OAAO,CAAC0C,aAAa,CAAC,CAAC,CAAC,CAEpD;AACFtE,SAAS,CAAC,CAAC,GAAGc,eAAe,CAACc,OAAO,CAACG,SAAS,CAAC,CAAC,CAAC,CAAC,CACrD,CAEA;AACA,GAAId,QAAQ,CAACW,OAAO,EAAI,GAAG,CAAE,CAC3BlB,oBAAoB,CAAE6D,IAAI,EAAK,CAC7B,MAAO,CAAAA,IAAI,CACRC,GAAG,CAAEC,UAAU,EAAK,KAAAC,sBAAA,CACnB,GAAI,CAACD,UAAU,CAACE,MAAM,CAAE,MAAO,CAAAF,UAAU,CAEzC;AACA,KAAM,CAAAG,IAAI,CAAGH,UAAU,CAAClF,CAAC,CAAGX,uBAAuB,CAEnD;AACA,KAAM,CAAA+C,IAAI,CAAGT,aAAa,CAACU,OAAO,CAClC,KAAM,CAAAiD,aAAa,CAAG,EAAAH,sBAAA,CAAA5D,eAAe,CAACc,OAAO,UAAA8C,sBAAA,iBAAvBA,sBAAA,CAAyB1C,SAAS,CAAC,CAAC,GAAI,CAAC,CAC/D,KAAM,CAAA8C,QAAQ,CACZF,IAAI,CAAG/F,uBAAuB,CAAG8C,IAAI,CAACD,MAAM,EAC5CkD,IAAI,CAAGjD,IAAI,CAACD,MAAM,CAAGpD,SAAS,EAC9BmG,UAAU,CAACjF,CAAC,CAAGV,wBAAwB,CAAG+F,aAAa,EACvDJ,UAAU,CAACjF,CAAC,CAAGqF,aAAa,CAAGvG,SAAS,CAE1C,GAAIwG,QAAQ,CAAE,CACZ;AACAlE,WAAW,CAAEmE,OAAO,EAAKA,OAAO,CAAG,CAAC,CAAC,CACrC,OAAAC,aAAA,CAAAA,aAAA,IAAYP,UAAU,MAAEE,MAAM,CAAE,KAAK,GACvC,CAEA;AACA,GAAIC,IAAI,CAAGjD,IAAI,CAACR,KAAK,CAAE,CACrB,OAAA6D,aAAA,CAAAA,aAAA,IAAYP,UAAU,MAAEE,MAAM,CAAE,KAAK,GACvC,CAEA,OAAAK,aAAA,CAAAA,aAAA,IAAYP,UAAU,MAAElF,CAAC,CAAEqF,IAAI,GACjC,CAAC,CAAC,CACDK,MAAM,CAAEC,CAAC,EAAKA,CAAC,CAACP,MAAM,CAAC,CAAE;AAC9B,CAAC,CAAC,CACJ,CAEA;AACA,GAAI1D,QAAQ,CAACW,OAAO,CAAG,CAAC,CAAE,CACxBzC,WAAW,CAAC,IAAI,CAAC,CACjB,OACF,CAEA2D,gBAAgB,CAAGqC,qBAAqB,CAACpC,IAAI,CAAC,CAChD,CAAC,CAEDD,gBAAgB,CAAGqC,qBAAqB,CAACpC,IAAI,CAAC,CAE9C,MAAO,IAAM,CACX,GAAID,gBAAgB,CAAE,CACpBsC,oBAAoB,CAACtC,gBAAgB,CAAC,CACxC,CACF,CAAC,CACH,CAAC,CAAE,CAAC5D,QAAQ,CAAC,CAAC,CAEd;AACF;AACA,KACE,KAAM,CAAAmG,eAAe,CAAGrH,WAAW,CAAC,IAAM,KAAAsH,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CACxC,GAAItG,QAAQ,CAAE,OAEd;AACA,CAAAoG,sBAAA,CAAAvE,eAAe,CAACa,OAAO,UAAA0D,sBAAA,iBAAvBA,sBAAA,CAAyBG,UAAU,CAAC,CAAC,CACrC;AACA,CAAAF,sBAAA,CAAAxE,eAAe,CAACa,OAAO,UAAA2D,sBAAA,iBAAvBA,sBAAA,CAAyBG,aAAa,CAAC,CAAC,CAExC,CAAAF,sBAAA,CAAA3E,gBAAgB,CAACe,OAAO,UAAA4D,sBAAA,iBAAxBA,sBAAA,CAA0BG,SAAS,CAAC,CAAC,CACvC,CAAC,CAAE,CAACzG,QAAQ,CAAC,CAAC,CAEd;AACF;AACA,KACE,KAAM,CAAA0G,aAAa,CAAG5H,WAAW,CAAC,IAAM,KAAA6H,sBAAA,CAAAC,sBAAA,CACtC,GAAI5G,QAAQ,CAAE,OACd,CAAA2G,sBAAA,CAAAhF,gBAAgB,CAACe,OAAO,UAAAiE,sBAAA,iBAAxBA,sBAAA,CAA0BE,OAAO,CAAC,CAAC,CACnC;AACA,CAAAD,sBAAA,CAAA/E,eAAe,CAACa,OAAO,UAAAkE,sBAAA,iBAAvBA,sBAAA,CAAyBE,cAAc,CAAC,CAAC,CAC3C,CAAC,CAAE,CAAC9G,QAAQ,CAAC,CAAC,CAEd;AACF;AACA,KACE,KAAM,CAAA+G,eAAe,CAAGjI,WAAW,CAAEkI,KAAiB,EAAK,KAAAC,sBAAA,CACzD,GAAIjH,QAAQ,CAAE,OACd,KAAM,CAAAyC,IAAI,CAAGT,aAAa,CAACU,OAAO,CAClC,CAAAuE,sBAAA,CAAAtF,gBAAgB,CAACe,OAAO,UAAAuE,sBAAA,iBAAxBA,sBAAA,CAA0BC,gBAAgB,CAACF,KAAK,CAACG,OAAO,CAAE1E,IAAI,CAACR,KAAK,CAAC,CACvE,CAAC,CAAE,CAACjC,QAAQ,CAAC,CAAC,CAEd;AACF;AACA,KACE,KAAM,CAAAoH,eAAe,CAAGtI,WAAW,CAAEkI,KAAiB,EAAK,CACzD,GAAIhH,QAAQ,CAAE,OACd,GAAIgH,KAAK,CAACK,OAAO,CAACC,MAAM,CAAG,CAAC,CAAE,KAAAC,sBAAA,CAC5B,KAAM,CAAA9E,IAAI,CAAGT,aAAa,CAACU,OAAO,CAClC,KAAM,CAAA8E,KAAK,CAAGR,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAC9B,CAAAE,sBAAA,CAAA5F,gBAAgB,CAACe,OAAO,UAAA6E,sBAAA,iBAAxBA,sBAAA,CAA0BL,gBAAgB,CAACM,KAAK,CAACL,OAAO,CAAE1E,IAAI,CAACR,KAAK,CAAC,CACvE,CACF,CAAC,CAAE,CAACjC,QAAQ,CAAC,CAAC,CAEd;AACF;AACA,KACE,KAAM,CAAAyH,WAAW,CAAG3I,WAAW,CAAC,IAAM,KAAA4I,sBAAA,CACpC,GAAI1H,QAAQ,EAAI+B,QAAQ,CAACW,OAAO,CAAG,GAAG,CAAE,OAExC,KAAM,CAAAiF,kBAAkB,EAAAD,sBAAA,CAAG/F,gBAAgB,CAACe,OAAO,UAAAgF,sBAAA,iBAAxBA,sBAAA,CAA0B9E,QAAQ,CAAC,CAAC,CAC/D,GAAI,CAAC+E,kBAAkB,CAAE,OAEzB;AACA,KAAM,CAAAC,aAA+B,CAAG,CACtCvH,CAAC,CAAEsH,kBAAkB,CAACvH,QAAQ,CAACC,CAAC,CAAGjB,SAAS,CAAG,CAAC,CAChDkB,CAAC,CAAEqH,kBAAkB,CAACvH,QAAQ,CAACE,CAAC,CAAGlB,SAAS,CAAG,CAAC,CAAGQ,wBAAwB,CAAG,CAAC,CAC/E6F,MAAM,CAAE,IACV,CAAC,CAEDjE,oBAAoB,CAAE6D,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAEuC,aAAa,CAAC,CAAC,CAC1D,CAAC,CAAE,CAAC5H,QAAQ,CAAC,CAAC,CAEd;AACF;AACA,KACE,KAAM,CAAA6H,aAAa,CAAG/I,WAAW,CAAC,IAAM,KAAAgJ,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CACtC,KAAM,CAAA1F,IAAI,CAAGT,aAAa,CAACU,OAAO,CAElC;AACAX,QAAQ,CAACW,OAAO,CAAG,CAAC,CACpB3C,QAAQ,CAAC,CAAC,CAAC,CAEX;AACA,CAAA+H,sBAAA,CAAAnG,gBAAgB,CAACe,OAAO,UAAAoF,sBAAA,iBAAxBA,sBAAA,CAA0BM,KAAK,CAAC3F,IAAI,CAACF,YAAY,CAAEE,IAAI,CAACH,OAAO,CAAC,CAChE,CAAAyF,sBAAA,CAAAnG,eAAe,CAACc,OAAO,UAAAqF,sBAAA,iBAAvBA,sBAAA,CAAyBK,KAAK,CAAC,CAAC,CAChC,CAAAJ,sBAAA,CAAAlG,kBAAkB,CAACY,OAAO,UAAAsF,sBAAA,iBAA1BA,sBAAA,CAA4BI,KAAK,CAAC,CAAC,CAEnC;AACAjI,cAAc,CAAC,EAAA8H,sBAAA,CAAAtG,gBAAgB,CAACe,OAAO,UAAAuF,sBAAA,iBAAxBA,sBAAA,CAA0BrF,QAAQ,CAAC,CAAC,GAAI1C,WAAW,CAAC,CACnEY,SAAS,CAAC,EAAAoH,sBAAA,CAAAtG,eAAe,CAACc,OAAO,UAAAwF,sBAAA,iBAAvBA,sBAAA,CAAyBrF,SAAS,CAAC,CAAC,GAAI,EAAE,CAAC,CACrD7B,SAAS,CAAC,EAAAmH,sBAAA,CAAAvG,eAAe,CAACc,OAAO,UAAAyF,sBAAA,iBAAvBA,sBAAA,CAAyBrF,SAAS,CAAC,CAAC,GAAIL,IAAI,CAACH,OAAO,CAAC,CAC/DlB,YAAY,CAAC,CAAC,CAAC,CACfnB,WAAW,CAAC,KAAK,CAAC,CAClBqB,SAAS,CAAC,KAAK,CAAC,CAChBE,oBAAoB,CAAC,EAAE,CAAC,CACxBE,WAAW,CAAC,CAAC,CAAC,CAChB,CAAC,CAAE,CAACxB,WAAW,CAAC,CAAC,CAEjB,MAAO,CACL;AACAJ,KAAK,CACLE,QAAQ,CACRyB,QAAQ,CACRvB,WAAW,CACXW,MAAM,CACNE,MAAM,CACNE,UAAU,CACVE,SAAS,CACTE,MAAM,CACNE,iBAAiB,CACjB8G,UAAU,CAAErG,aAAa,CAACU,OAAO,CAEjC;AACA4F,eAAe,CAAExG,kBAAkB,CAACY,OAAO,CAE3C;AACAyD,eAAe,CACfO,aAAa,CACbK,eAAe,CACfK,eAAe,CACfK,WAAW,CACXI,aACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}