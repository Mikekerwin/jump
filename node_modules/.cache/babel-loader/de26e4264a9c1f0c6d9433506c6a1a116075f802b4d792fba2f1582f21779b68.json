{"ast":null,"code":"import _objectSpread from\"/Users/OCSAdmin/Projects/geminiTut/my-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\n * useGameLoop Hook\n *\n * Main game loop that orchestrates all game systems\n */import{useState,useRef,useEffect,useCallback}from'react';import{PlayerPhysics}from'../systems/playerPhysics';import{LaserPhysics}from'../systems/laserPhysics';import{AudioManager,setupAudioUnlock}from'../systems/audioManager';import{BackgroundStars}from'../systems/backgroundStars';import{BALL_SIZE,HITBOX_SIZE,PLAYER_X_POSITION,FLOOR_Y_POSITION,ENEMY_X_POSITION,SCORE_UPDATE_INTERVAL,PLAYER_PROJECTILE_SPEED,PLAYER_PROJECTILE_WIDTH,PLAYER_PROJECTILE_HEIGHT,ENEMY_WIDTH_GROWTH_PER_CYCLE,ENEMY_HEIGHT_GROWTH_PER_CYCLE}from'../config/gameConfig';export const useGameLoop=()=>{// Game state\nconst[score,setScore]=useState(0);const[gameOver,setGameOver]=useState(false);const[playerState,setPlayerState]=useState({position:{x:0,y:0},velocity:0,scaleX:1,scaleY:1,hasJumped:false,isHolding:false,holdStartTime:0});const[lasers,setLasers]=useState([]);const[enemyY,setEnemyY]=useState(0);const[enemyScale,setEnemyScale]=useState({scaleX:1,scaleY:1});const[numLasers,setNumLasers]=useState(1);const[wasHit,setWasHit]=useState(false);const[playerProjectiles,setPlayerProjectiles]=useState([]);const[hitCount,setHitCount]=useState(0);const[enemyWasHit,setEnemyWasHit]=useState(false);const[enemyGrowthLevel,setEnemyGrowthLevel]=useState(0);const enemyGrowthLevelRef=useRef(enemyGrowthLevel);// Game systems\nconst playerPhysicsRef=useRef(null);const laserPhysicsRef=useRef(null);const audioManagerRef=useRef(null);const backgroundStarsRef=useRef(null);const scoreRef=useRef(0);const dimensionsRef=useRef({width:window.innerWidth,height:window.innerHeight,centerY:window.innerHeight*FLOOR_Y_POSITION-HITBOX_SIZE/2,playerStartX:window.innerWidth*PLAYER_X_POSITION-BALL_SIZE/2,enemyX:window.innerWidth*ENEMY_X_POSITION-BALL_SIZE});// Initialize\nuseEffect(()=>{const dims=dimensionsRef.current;playerPhysicsRef.current=new PlayerPhysics(dims.playerStartX,dims.centerY,dims.centerY);laserPhysicsRef.current=new LaserPhysics(dims.width,dims.height,dims.centerY,dims.enemyX);audioManagerRef.current=new AudioManager();const cleanupAudio=setupAudioUnlock(audioManagerRef.current);backgroundStarsRef.current=new BackgroundStars(dims.width,dims.height);setPlayerState(playerPhysicsRef.current.getState());setLasers(laserPhysicsRef.current.getLasers());setEnemyY(laserPhysicsRef.current.getEnemyY());return()=>{var _audioManagerRef$curr;cleanupAudio();(_audioManagerRef$curr=audioManagerRef.current)===null||_audioManagerRef$curr===void 0?void 0:_audioManagerRef$curr.dispose();};},[]);// Update score display\nuseEffect(()=>{const interval=setInterval(()=>{setScore(scoreRef.current);},SCORE_UPDATE_INTERVAL);return()=>clearInterval(interval);},[]);// Keep a ref in sync with the enemyGrowthLevel state\nuseEffect(()=>{enemyGrowthLevelRef.current=enemyGrowthLevel;},[enemyGrowthLevel]);// Handle resize\nuseEffect(()=>{const handleResize=()=>{var _playerPhysicsRef$cur,_laserPhysicsRef$curr,_backgroundStarsRef$c;const dims=dimensionsRef.current;dims.width=window.innerWidth;dims.height=window.innerHeight;dims.centerY=window.innerHeight*FLOOR_Y_POSITION-HITBOX_SIZE/2;dims.playerStartX=window.innerWidth*PLAYER_X_POSITION-BALL_SIZE/2;dims.enemyX=window.innerWidth*ENEMY_X_POSITION-BALL_SIZE;(_playerPhysicsRef$cur=playerPhysicsRef.current)===null||_playerPhysicsRef$cur===void 0?void 0:_playerPhysicsRef$cur.updateCenterY(dims.centerY);(_laserPhysicsRef$curr=laserPhysicsRef.current)===null||_laserPhysicsRef$curr===void 0?void 0:_laserPhysicsRef$curr.updateDimensions(dims.width,dims.height,dims.centerY,dims.enemyX);(_backgroundStarsRef$c=backgroundStarsRef.current)===null||_backgroundStarsRef$c===void 0?void 0:_backgroundStarsRef$c.updateDimensions(dims.width,dims.height);};window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Main game loop\nuseEffect(()=>{if(gameOver)return;let animationFrameId;const loop=()=>{var _backgroundStarsRef$c2,_laserPhysicsRef$curr2,_laserPhysicsRef$curr3,_playerPhysicsRef$cur2,_laserPhysicsRef$curr4,_playerPhysicsRef$cur4,_laserPhysicsRef$curr6,_laserPhysicsRef$curr7;(_backgroundStarsRef$c2=backgroundStarsRef.current)===null||_backgroundStarsRef$c2===void 0?void 0:_backgroundStarsRef$c2.update();(_laserPhysicsRef$curr2=laserPhysicsRef.current)===null||_laserPhysicsRef$curr2===void 0?void 0:_laserPhysicsRef$curr2.updateLaserCount(scoreRef.current);setNumLasers(((_laserPhysicsRef$curr3=laserPhysicsRef.current)===null||_laserPhysicsRef$curr3===void 0?void 0:_laserPhysicsRef$curr3.getNumLasers())||1);const newPlayerState=(_playerPhysicsRef$cur2=playerPhysicsRef.current)===null||_playerPhysicsRef$cur2===void 0?void 0:_playerPhysicsRef$cur2.update();if(newPlayerState){var _playerPhysicsRef$cur3;setPlayerState(newPlayerState);if((_playerPhysicsRef$cur3=playerPhysicsRef.current)!==null&&_playerPhysicsRef$cur3!==void 0&&_playerPhysicsRef$cur3.shouldPlayBounceSound()){var _audioManagerRef$curr2;const volume=playerPhysicsRef.current.getBounceVolume();(_audioManagerRef$curr2=audioManagerRef.current)===null||_audioManagerRef$curr2===void 0?void 0:_audioManagerRef$curr2.playBounce(volume);}}const laserUpdate=(_laserPhysicsRef$curr4=laserPhysicsRef.current)===null||_laserPhysicsRef$curr4===void 0?void 0:_laserPhysicsRef$curr4.update(scoreRef.current,(newPlayerState===null||newPlayerState===void 0?void 0:newPlayerState.position)||{x:0,y:0},((_playerPhysicsRef$cur4=playerPhysicsRef.current)===null||_playerPhysicsRef$cur4===void 0?void 0:_playerPhysicsRef$cur4.hasPlayerJumped())||false);if(laserUpdate&&laserPhysicsRef.current){scoreRef.current+=laserUpdate.scoreChange;if(laserUpdate.wasHit){var _audioManagerRef$curr3;setWasHit(true);(_audioManagerRef$curr3=audioManagerRef.current)===null||_audioManagerRef$curr3===void 0?void 0:_audioManagerRef$curr3.playLaserHit();setTimeout(()=>setWasHit(false),250);}setEnemyY(laserPhysicsRef.current.getEnemyY());setLasers(laserPhysicsRef.current.getLasers());}// Handle projectiles & enemy hits\nif(scoreRef.current>=100){setPlayerProjectiles(prev=>prev.map(projectile=>{var _laserPhysicsRef$curr5;if(!projectile.active)return projectile;const newX=projectile.x+PLAYER_PROJECTILE_SPEED;const dims=dimensionsRef.current;const currentEnemyWidth=BALL_SIZE+enemyGrowthLevelRef.current*ENEMY_WIDTH_GROWTH_PER_CYCLE;const currentEnemyHeight=BALL_SIZE+enemyGrowthLevelRef.current*ENEMY_HEIGHT_GROWTH_PER_CYCLE;const enemyCurrentY=((_laserPhysicsRef$curr5=laserPhysicsRef.current)===null||_laserPhysicsRef$curr5===void 0?void 0:_laserPhysicsRef$curr5.getEnemyY())||0;const hitEnemy=newX+PLAYER_PROJECTILE_WIDTH>dims.enemyX&&newX<dims.enemyX+currentEnemyWidth&&projectile.y+PLAYER_PROJECTILE_HEIGHT>enemyCurrentY&&projectile.y<enemyCurrentY+currentEnemyHeight;if(hitEnemy){var _audioManagerRef$curr4;setHitCount(prevHit=>{const newHitCount=prevHit+1;if(newHitCount>=20){console.log('Enemy grew!');setEnemyGrowthLevel(prevGrowth=>prevGrowth+1);return 0;}return newHitCount;});setEnemyWasHit(true);(_audioManagerRef$curr4=audioManagerRef.current)===null||_audioManagerRef$curr4===void 0?void 0:_audioManagerRef$curr4.playLaserHit();setTimeout(()=>setEnemyWasHit(false),250);return _objectSpread(_objectSpread({},projectile),{},{active:false});}if(newX>dims.width)return _objectSpread(_objectSpread({},projectile),{},{active:false});return _objectSpread(_objectSpread({},projectile),{},{x:newX});}).filter(p=>p.active));}// ✅ Pass updated growth level to physics FIRST\n(_laserPhysicsRef$curr6=laserPhysicsRef.current)===null||_laserPhysicsRef$curr6===void 0?void 0:_laserPhysicsRef$curr6.setEnemyGrowthLevel(enemyGrowthLevelRef.current);// ✅ Now get updated scale that reflects growth\nconst newScale=((_laserPhysicsRef$curr7=laserPhysicsRef.current)===null||_laserPhysicsRef$curr7===void 0?void 0:_laserPhysicsRef$curr7.getEnemyScale())||1;setEnemyScale({scaleX:newScale,scaleY:newScale});if(scoreRef.current<0){setGameOver(true);return;}animationFrameId=requestAnimationFrame(loop);};animationFrameId=requestAnimationFrame(loop);return()=>cancelAnimationFrame(animationFrameId);},[gameOver]);// Jump handlers\nconst handleJumpStart=useCallback(()=>{var _audioManagerRef$curr5,_audioManagerRef$curr6,_playerPhysicsRef$cur5;if(gameOver)return;(_audioManagerRef$curr5=audioManagerRef.current)===null||_audioManagerRef$curr5===void 0?void 0:_audioManagerRef$curr5.initialize();(_audioManagerRef$curr6=audioManagerRef.current)===null||_audioManagerRef$curr6===void 0?void 0:_audioManagerRef$curr6.playJumpSound();(_playerPhysicsRef$cur5=playerPhysicsRef.current)===null||_playerPhysicsRef$cur5===void 0?void 0:_playerPhysicsRef$cur5.startJump();},[gameOver]);const handleJumpEnd=useCallback(()=>{var _playerPhysicsRef$cur6,_audioManagerRef$curr7;if(gameOver)return;(_playerPhysicsRef$cur6=playerPhysicsRef.current)===null||_playerPhysicsRef$cur6===void 0?void 0:_playerPhysicsRef$cur6.endJump();(_audioManagerRef$curr7=audioManagerRef.current)===null||_audioManagerRef$curr7===void 0?void 0:_audioManagerRef$curr7.resetJumpSound();},[gameOver]);const handleMouseMove=useCallback(event=>{var _playerPhysicsRef$cur7;if(gameOver)return;const dims=dimensionsRef.current;(_playerPhysicsRef$cur7=playerPhysicsRef.current)===null||_playerPhysicsRef$cur7===void 0?void 0:_playerPhysicsRef$cur7.setMousePosition(event.clientX,dims.width);},[gameOver]);const handleTouchMove=useCallback(event=>{if(gameOver)return;if(event.touches.length>0){var _playerPhysicsRef$cur8;const dims=dimensionsRef.current;const touch=event.touches[0];(_playerPhysicsRef$cur8=playerPhysicsRef.current)===null||_playerPhysicsRef$cur8===void 0?void 0:_playerPhysicsRef$cur8.setMousePosition(touch.clientX,dims.width);}},[gameOver]);const handleShoot=useCallback(()=>{var _playerPhysicsRef$cur9;if(gameOver||scoreRef.current<100)return;// Shooting unlocks at score 100\nconst currentPlayerState=(_playerPhysicsRef$cur9=playerPhysicsRef.current)===null||_playerPhysicsRef$cur9===void 0?void 0:_playerPhysicsRef$cur9.getState();if(!currentPlayerState)return;const newProjectile={x:currentPlayerState.position.x+BALL_SIZE/2,y:currentPlayerState.position.y+BALL_SIZE/2-PLAYER_PROJECTILE_HEIGHT/2,active:true};setPlayerProjectiles(prev=>[...prev,newProjectile]);},[gameOver]);const handleTestScore=useCallback(()=>{var _laserPhysicsRef$curr8;scoreRef.current+=75;(_laserPhysicsRef$curr8=laserPhysicsRef.current)===null||_laserPhysicsRef$curr8===void 0?void 0:_laserPhysicsRef$curr8.setScore(scoreRef.current);},[]);const handleRestart=useCallback(()=>{var _playerPhysicsRef$cur0,_laserPhysicsRef$curr9,_backgroundStarsRef$c3,_playerPhysicsRef$cur1,_laserPhysicsRef$curr0,_laserPhysicsRef$curr1;const dims=dimensionsRef.current;scoreRef.current=0;setScore(0);(_playerPhysicsRef$cur0=playerPhysicsRef.current)===null||_playerPhysicsRef$cur0===void 0?void 0:_playerPhysicsRef$cur0.reset(dims.playerStartX,dims.centerY);(_laserPhysicsRef$curr9=laserPhysicsRef.current)===null||_laserPhysicsRef$curr9===void 0?void 0:_laserPhysicsRef$curr9.reset();(_backgroundStarsRef$c3=backgroundStarsRef.current)===null||_backgroundStarsRef$c3===void 0?void 0:_backgroundStarsRef$c3.reset();setPlayerState(((_playerPhysicsRef$cur1=playerPhysicsRef.current)===null||_playerPhysicsRef$cur1===void 0?void 0:_playerPhysicsRef$cur1.getState())||playerState);setLasers(((_laserPhysicsRef$curr0=laserPhysicsRef.current)===null||_laserPhysicsRef$curr0===void 0?void 0:_laserPhysicsRef$curr0.getLasers())||[]);setEnemyY(((_laserPhysicsRef$curr1=laserPhysicsRef.current)===null||_laserPhysicsRef$curr1===void 0?void 0:_laserPhysicsRef$curr1.getEnemyY())||dims.centerY);setNumLasers(1);setGameOver(false);setWasHit(false);setEnemyWasHit(false);setPlayerProjectiles([]);setHitCount(0);setEnemyGrowthLevel(0);},[playerState]);return{score,gameOver,hitCount,enemyWasHit,playerState,lasers,enemyY,enemyScale,numLasers,wasHit,playerProjectiles,dimensions:dimensionsRef.current,backgroundStars:backgroundStarsRef.current,handleJumpStart,handleJumpEnd,handleMouseMove,handleTouchMove,handleShoot,handleRestart,handleTestScore};};","map":{"version":3,"names":["useState","useRef","useEffect","useCallback","PlayerPhysics","LaserPhysics","AudioManager","setupAudioUnlock","BackgroundStars","BALL_SIZE","HITBOX_SIZE","PLAYER_X_POSITION","FLOOR_Y_POSITION","ENEMY_X_POSITION","SCORE_UPDATE_INTERVAL","PLAYER_PROJECTILE_SPEED","PLAYER_PROJECTILE_WIDTH","PLAYER_PROJECTILE_HEIGHT","ENEMY_WIDTH_GROWTH_PER_CYCLE","ENEMY_HEIGHT_GROWTH_PER_CYCLE","useGameLoop","score","setScore","gameOver","setGameOver","playerState","setPlayerState","position","x","y","velocity","scaleX","scaleY","hasJumped","isHolding","holdStartTime","lasers","setLasers","enemyY","setEnemyY","enemyScale","setEnemyScale","numLasers","setNumLasers","wasHit","setWasHit","playerProjectiles","setPlayerProjectiles","hitCount","setHitCount","enemyWasHit","setEnemyWasHit","enemyGrowthLevel","setEnemyGrowthLevel","enemyGrowthLevelRef","playerPhysicsRef","laserPhysicsRef","audioManagerRef","backgroundStarsRef","scoreRef","dimensionsRef","width","window","innerWidth","height","innerHeight","centerY","playerStartX","enemyX","dims","current","cleanupAudio","getState","getLasers","getEnemyY","_audioManagerRef$curr","dispose","interval","setInterval","clearInterval","handleResize","_playerPhysicsRef$cur","_laserPhysicsRef$curr","_backgroundStarsRef$c","updateCenterY","updateDimensions","addEventListener","removeEventListener","animationFrameId","loop","_backgroundStarsRef$c2","_laserPhysicsRef$curr2","_laserPhysicsRef$curr3","_playerPhysicsRef$cur2","_laserPhysicsRef$curr4","_playerPhysicsRef$cur4","_laserPhysicsRef$curr6","_laserPhysicsRef$curr7","update","updateLaserCount","getNumLasers","newPlayerState","_playerPhysicsRef$cur3","shouldPlayBounceSound","_audioManagerRef$curr2","volume","getBounceVolume","playBounce","laserUpdate","hasPlayerJumped","scoreChange","_audioManagerRef$curr3","playLaserHit","setTimeout","prev","map","projectile","_laserPhysicsRef$curr5","active","newX","currentEnemyWidth","currentEnemyHeight","enemyCurrentY","hitEnemy","_audioManagerRef$curr4","prevHit","newHitCount","console","log","prevGrowth","_objectSpread","filter","p","newScale","getEnemyScale","requestAnimationFrame","cancelAnimationFrame","handleJumpStart","_audioManagerRef$curr5","_audioManagerRef$curr6","_playerPhysicsRef$cur5","initialize","playJumpSound","startJump","handleJumpEnd","_playerPhysicsRef$cur6","_audioManagerRef$curr7","endJump","resetJumpSound","handleMouseMove","event","_playerPhysicsRef$cur7","setMousePosition","clientX","handleTouchMove","touches","length","_playerPhysicsRef$cur8","touch","handleShoot","_playerPhysicsRef$cur9","currentPlayerState","newProjectile","handleTestScore","_laserPhysicsRef$curr8","handleRestart","_playerPhysicsRef$cur0","_laserPhysicsRef$curr9","_backgroundStarsRef$c3","_playerPhysicsRef$cur1","_laserPhysicsRef$curr0","_laserPhysicsRef$curr1","reset","dimensions","backgroundStars"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/hooks/useGameLoop.ts"],"sourcesContent":["/**\n * useGameLoop Hook\n *\n * Main game loop that orchestrates all game systems\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { PlayerPhysics } from '../systems/playerPhysics';\nimport { LaserPhysics } from '../systems/laserPhysics';\nimport { AudioManager, setupAudioUnlock } from '../systems/audioManager';\nimport { BackgroundStars } from '../systems/backgroundStars';\nimport { PlayerState, LaserState, PlayerProjectile } from '../types/game';\nimport {\n  BALL_SIZE,\n  HITBOX_SIZE,\n  PLAYER_X_POSITION,\n  FLOOR_Y_POSITION,\n  ENEMY_X_POSITION,\n  SCORE_UPDATE_INTERVAL,\n  PLAYER_PROJECTILE_SPEED,\n  PLAYER_PROJECTILE_WIDTH,\n  PLAYER_PROJECTILE_HEIGHT,\n  ENEMY_WIDTH_GROWTH_PER_CYCLE,\n  ENEMY_HEIGHT_GROWTH_PER_CYCLE,\n} from '../config/gameConfig';\n\nexport const useGameLoop = () => {\n  // Game state\n  const [score, setScore] = useState(0);\n  const [gameOver, setGameOver] = useState(false);\n  const [playerState, setPlayerState] = useState<PlayerState>({\n    position: { x: 0, y: 0 },\n    velocity: 0,\n    scaleX: 1,\n    scaleY: 1,\n    hasJumped: false,\n    isHolding: false,\n    holdStartTime: 0,\n  });\n  const [lasers, setLasers] = useState<LaserState[]>([]);\n  const [enemyY, setEnemyY] = useState(0);\n  const [enemyScale, setEnemyScale] = useState({ scaleX: 1, scaleY: 1 });\n  const [numLasers, setNumLasers] = useState(1);\n  const [wasHit, setWasHit] = useState(false);\n  const [playerProjectiles, setPlayerProjectiles] = useState<PlayerProjectile[]>([]);\n  const [hitCount, setHitCount] = useState(0);\n  const [enemyWasHit, setEnemyWasHit] = useState(false);\n  const [enemyGrowthLevel, setEnemyGrowthLevel] = useState(0);\n  const enemyGrowthLevelRef = useRef(enemyGrowthLevel);\n\n  // Game systems\n  const playerPhysicsRef = useRef<PlayerPhysics | null>(null);\n  const laserPhysicsRef = useRef<LaserPhysics | null>(null);\n  const audioManagerRef = useRef<AudioManager | null>(null);\n  const backgroundStarsRef = useRef<BackgroundStars | null>(null);\n\n  const scoreRef = useRef(0);\n\n  const dimensionsRef = useRef({\n    width: window.innerWidth,\n    height: window.innerHeight,\n    centerY: window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2,\n    playerStartX: window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2,\n    enemyX: window.innerWidth * ENEMY_X_POSITION - BALL_SIZE,\n  });\n\n  // Initialize\n  useEffect(() => {\n    const dims = dimensionsRef.current;\n\n    playerPhysicsRef.current = new PlayerPhysics(\n      dims.playerStartX,\n      dims.centerY,\n      dims.centerY\n    );\n\n    laserPhysicsRef.current = new LaserPhysics(\n      dims.width,\n      dims.height,\n      dims.centerY,\n      dims.enemyX\n    );\n\n    audioManagerRef.current = new AudioManager();\n    const cleanupAudio = setupAudioUnlock(audioManagerRef.current);\n\n    backgroundStarsRef.current = new BackgroundStars(dims.width, dims.height);\n\n    setPlayerState(playerPhysicsRef.current.getState());\n    setLasers(laserPhysicsRef.current.getLasers());\n    setEnemyY(laserPhysicsRef.current.getEnemyY());\n\n    return () => {\n      cleanupAudio();\n      audioManagerRef.current?.dispose();\n    };\n  }, []);\n\n  // Update score display\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setScore(scoreRef.current);\n    }, SCORE_UPDATE_INTERVAL);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Keep a ref in sync with the enemyGrowthLevel state\n  useEffect(() => {\n    enemyGrowthLevelRef.current = enemyGrowthLevel;\n  }, [enemyGrowthLevel]);\n\n  // Handle resize\n  useEffect(() => {\n    const handleResize = () => {\n      const dims = dimensionsRef.current;\n      dims.width = window.innerWidth;\n      dims.height = window.innerHeight;\n      dims.centerY = window.innerHeight * FLOOR_Y_POSITION - HITBOX_SIZE / 2;\n      dims.playerStartX = window.innerWidth * PLAYER_X_POSITION - BALL_SIZE / 2;\n      dims.enemyX = window.innerWidth * ENEMY_X_POSITION - BALL_SIZE;\n\n      playerPhysicsRef.current?.updateCenterY(dims.centerY);\n      laserPhysicsRef.current?.updateDimensions(dims.width, dims.height, dims.centerY, dims.enemyX);\n      backgroundStarsRef.current?.updateDimensions(dims.width, dims.height);\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Main game loop\n  useEffect(() => {\n    if (gameOver) return;\n    let animationFrameId: number;\n\n    const loop = () => {\n      backgroundStarsRef.current?.update();\n      laserPhysicsRef.current?.updateLaserCount(scoreRef.current);\n      setNumLasers(laserPhysicsRef.current?.getNumLasers() || 1);\n\n      const newPlayerState = playerPhysicsRef.current?.update();\n      if (newPlayerState) {\n        setPlayerState(newPlayerState);\n        if (playerPhysicsRef.current?.shouldPlayBounceSound()) {\n          const volume = playerPhysicsRef.current.getBounceVolume();\n          audioManagerRef.current?.playBounce(volume);\n        }\n      }\n\n      const laserUpdate = laserPhysicsRef.current?.update(\n        scoreRef.current,\n        newPlayerState?.position || { x: 0, y: 0 },\n        playerPhysicsRef.current?.hasPlayerJumped() || false\n      );\n\n      if (laserUpdate && laserPhysicsRef.current) {\n        scoreRef.current += laserUpdate.scoreChange;\n        if (laserUpdate.wasHit) {\n          setWasHit(true);\n          audioManagerRef.current?.playLaserHit();\n          setTimeout(() => setWasHit(false), 250);\n        }\n        setEnemyY(laserPhysicsRef.current.getEnemyY());\n        setLasers(laserPhysicsRef.current.getLasers());\n      }\n\n      // Handle projectiles & enemy hits\n      if (scoreRef.current >= 100) {\n        setPlayerProjectiles((prev) =>\n          prev\n            .map((projectile) => {\n              if (!projectile.active) return projectile;\n\n              const newX = projectile.x + PLAYER_PROJECTILE_SPEED;\n              const dims = dimensionsRef.current;\n              const currentEnemyWidth = BALL_SIZE + (enemyGrowthLevelRef.current * ENEMY_WIDTH_GROWTH_PER_CYCLE);\n              const currentEnemyHeight = BALL_SIZE + (enemyGrowthLevelRef.current * ENEMY_HEIGHT_GROWTH_PER_CYCLE);\n              const enemyCurrentY = laserPhysicsRef.current?.getEnemyY() || 0;\n\n              const hitEnemy =\n                newX + PLAYER_PROJECTILE_WIDTH > dims.enemyX &&\n                newX < dims.enemyX + currentEnemyWidth &&\n                projectile.y + PLAYER_PROJECTILE_HEIGHT > enemyCurrentY &&\n                projectile.y < enemyCurrentY + currentEnemyHeight;\n\n              if (hitEnemy) {\n                setHitCount((prevHit) => {\n                  const newHitCount = prevHit + 1;\n                  if (newHitCount >= 20) {\n                    console.log('Enemy grew!');\n                    setEnemyGrowthLevel((prevGrowth) => prevGrowth + 1);\n                    return 0;\n                  }\n                  return newHitCount;\n                });\n                setEnemyWasHit(true);\n                audioManagerRef.current?.playLaserHit();\n                setTimeout(() => setEnemyWasHit(false), 250);\n                return { ...projectile, active: false };\n              }\n\n              if (newX > dims.width) return { ...projectile, active: false };\n              return { ...projectile, x: newX };\n            })\n            .filter((p) => p.active)\n        );\n      }\n\n      // ✅ Pass updated growth level to physics FIRST\n      laserPhysicsRef.current?.setEnemyGrowthLevel(enemyGrowthLevelRef.current);\n\n      // ✅ Now get updated scale that reflects growth\n      const newScale = laserPhysicsRef.current?.getEnemyScale() || 1;\n      setEnemyScale({ scaleX: newScale, scaleY: newScale });\n\n      if (scoreRef.current < 0) {\n        setGameOver(true);\n        return;\n      }\n\n      animationFrameId = requestAnimationFrame(loop);\n    };\n\n    animationFrameId = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(animationFrameId);\n  }, [gameOver]);\n\n  // Jump handlers\n  const handleJumpStart = useCallback(() => {\n    if (gameOver) return;\n    audioManagerRef.current?.initialize();\n    audioManagerRef.current?.playJumpSound();\n    playerPhysicsRef.current?.startJump();\n  }, [gameOver]);\n\n  const handleJumpEnd = useCallback(() => {\n    if (gameOver) return;\n    playerPhysicsRef.current?.endJump();\n    audioManagerRef.current?.resetJumpSound();\n  }, [gameOver]);\n\n  const handleMouseMove = useCallback((event: MouseEvent) => {\n    if (gameOver) return;\n    const dims = dimensionsRef.current;\n    playerPhysicsRef.current?.setMousePosition(event.clientX, dims.width);\n  }, [gameOver]);\n\n  const handleTouchMove = useCallback((event: TouchEvent) => {\n    if (gameOver) return;\n    if (event.touches.length > 0) {\n      const dims = dimensionsRef.current;\n      const touch = event.touches[0];\n      playerPhysicsRef.current?.setMousePosition(touch.clientX, dims.width);\n    }\n  }, [gameOver]);\n\n  const handleShoot = useCallback(() => {\n    if (gameOver || scoreRef.current < 100) return; // Shooting unlocks at score 100\n    const currentPlayerState = playerPhysicsRef.current?.getState();\n    if (!currentPlayerState) return;\n\n    const newProjectile: PlayerProjectile = {\n      x: currentPlayerState.position.x + BALL_SIZE / 2,\n      y: currentPlayerState.position.y + BALL_SIZE / 2 - PLAYER_PROJECTILE_HEIGHT / 2,\n      active: true,\n    };\n\n    setPlayerProjectiles((prev) => [...prev, newProjectile]);\n  }, [gameOver]);\n\n  const handleTestScore = useCallback(() => {\n    scoreRef.current += 75;\n    laserPhysicsRef.current?.setScore(scoreRef.current);\n  }, []);\n\n  const handleRestart = useCallback(() => {\n    const dims = dimensionsRef.current;\n    scoreRef.current = 0;\n    setScore(0);\n    playerPhysicsRef.current?.reset(dims.playerStartX, dims.centerY);\n    laserPhysicsRef.current?.reset();\n    backgroundStarsRef.current?.reset();\n    setPlayerState(playerPhysicsRef.current?.getState() || playerState);\n    setLasers(laserPhysicsRef.current?.getLasers() || []);\n    setEnemyY(laserPhysicsRef.current?.getEnemyY() || dims.centerY);\n    setNumLasers(1);\n    setGameOver(false);\n    setWasHit(false);\n    setEnemyWasHit(false);\n    setPlayerProjectiles([]);\n    setHitCount(0);\n    setEnemyGrowthLevel(0);\n  }, [playerState]);\n\n  return {\n    score,\n    gameOver,\n    hitCount,\n    enemyWasHit,\n    playerState,\n    lasers,\n    enemyY,\n    enemyScale,\n    numLasers,\n    wasHit,\n    playerProjectiles,\n    dimensions: dimensionsRef.current,\n    backgroundStars: backgroundStarsRef.current,\n    handleJumpStart,\n    handleJumpEnd,\n    handleMouseMove,\n    handleTouchMove,\n    handleShoot,\n    handleRestart,\n    handleTestScore,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}