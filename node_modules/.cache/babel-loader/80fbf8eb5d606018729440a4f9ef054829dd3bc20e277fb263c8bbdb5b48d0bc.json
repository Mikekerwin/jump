{"ast":null,"code":"/**\n * Audio Manager System\n * Handles all game sound effects and background music\n */import{BOUNCE_SOUND_PATH,LASER_HIT_SOUND_PATH,BACKGROUND_MUSIC_PATH,BACKGROUND_MUSIC_VOLUME,BOUNCE_DEBOUNCE_MS}from'../config/gameConfig';export class AudioManager{constructor(){this.bounceSound=null;this.laserHitSound=null;this.backgroundMusic=null;this.lastBounceTime=0;this.isUnlocked=false;this.hasPlayedJumpSound=false;}// Track if jump sound played this press\n/**\n   * Initialize audio system (must be called on user interaction)\n   */initialize(){if(this.isUnlocked)return;console.log('üîä Initializing audio system...');try{// Create bounce sound\nthis.bounceSound=new Audio(BOUNCE_SOUND_PATH);this.bounceSound.volume=1;this.bounceSound.load();// Preload for Chrome\n// Create laser hit sound\nthis.laserHitSound=new Audio(LASER_HIT_SOUND_PATH);this.laserHitSound.volume=1;this.laserHitSound.load();// Preload for Chrome\n// Create background music\nthis.backgroundMusic=new Audio(BACKGROUND_MUSIC_PATH);this.backgroundMusic.loop=true;this.backgroundMusic.volume=BACKGROUND_MUSIC_VOLUME;this.backgroundMusic.load();// Preload for Chrome\n// Start background music (Chrome may block)\nthis.backgroundMusic.play().then(()=>console.log('üéµ Background music started')).catch(e=>console.warn('‚ö†Ô∏è Background music blocked:',e.message));// Unlock bounce sound by playing and immediately pausing (Chrome requirement)\nthis.bounceSound.play().then(()=>{console.log('‚úÖ Bounce sound unlocked');if(this.bounceSound){this.bounceSound.pause();this.bounceSound.currentTime=0;}}).catch(e=>console.warn('‚ö†Ô∏è Bounce sound unlock failed:',e.message));this.isUnlocked=true;console.log('‚úÖ Audio system initialized');}catch(error){console.error('‚ùå Audio initialization failed:',error);}}/**\n   * Play jump sound (only once per button press)\n   */playJumpSound(){if(!this.bounceSound){console.warn('‚ö†Ô∏è Jump sound: No audio object');return;}if(this.hasPlayedJumpSound)return;// Don't play again until released\nthis.bounceSound.currentTime=0;this.bounceSound.volume=1;this.bounceSound.play().then(()=>console.log('üîä Jump sound played')).catch(e=>console.error('‚ùå Jump sound failed:',e.message));this.hasPlayedJumpSound=true;}/**\n   * Reset jump sound flag (call when button is released)\n   */resetJumpSound(){this.hasPlayedJumpSound=false;}/**\n   * Play bounce sound with volume control (for landing)\n   */playBounce(){let volume=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;if(!this.bounceSound)return;const now=performance.now();// Debounce rapid bounces\nif(now-this.lastBounceTime<BOUNCE_DEBOUNCE_MS){return;}this.bounceSound.currentTime=0;this.bounceSound.volume=Math.max(0,Math.min(1,volume));this.bounceSound.play().catch(()=>{// Playback might fail\n});this.lastBounceTime=now;}/**\n   * Play laser hit sound\n   */playLaserHit(){if(!this.laserHitSound)return;this.laserHitSound.currentTime=0;this.laserHitSound.volume=1;this.laserHitSound.play().catch(()=>{// Playback might fail\n});}/**\n   * Play background music\n   */playBackgroundMusic(){if(!this.backgroundMusic)return;this.backgroundMusic.play().catch(()=>{// Autoplay might be blocked\n});}/**\n   * Pause background music\n   */pauseBackgroundMusic(){if(!this.backgroundMusic)return;this.backgroundMusic.pause();}/**\n   * Set background music volume\n   */setMusicVolume(volume){if(!this.backgroundMusic)return;this.backgroundMusic.volume=Math.max(0,Math.min(1,volume));}/**\n   * Cleanup audio resources\n   */dispose(){if(this.bounceSound){this.bounceSound.pause();this.bounceSound=null;}if(this.laserHitSound){this.laserHitSound.pause();this.laserHitSound=null;}if(this.backgroundMusic){this.backgroundMusic.pause();this.backgroundMusic=null;}}/**\n   * Check if audio is unlocked\n   */isAudioUnlocked(){return this.isUnlocked;}}/**\n * Hook for unlocking audio on first user interaction\n */export const setupAudioUnlock=audioManager=>{const unlockAudio=()=>{audioManager.initialize();cleanup();};const cleanup=()=>{window.removeEventListener('click',unlockAudio);window.removeEventListener('keydown',unlockAudio);window.removeEventListener('touchstart',unlockAudio);};window.addEventListener('click',unlockAudio);window.addEventListener('keydown',unlockAudio);window.addEventListener('touchstart',unlockAudio);return cleanup;};","map":{"version":3,"names":["BOUNCE_SOUND_PATH","LASER_HIT_SOUND_PATH","BACKGROUND_MUSIC_PATH","BACKGROUND_MUSIC_VOLUME","BOUNCE_DEBOUNCE_MS","AudioManager","constructor","bounceSound","laserHitSound","backgroundMusic","lastBounceTime","isUnlocked","hasPlayedJumpSound","initialize","console","log","Audio","volume","load","loop","play","then","catch","e","warn","message","pause","currentTime","error","playJumpSound","resetJumpSound","playBounce","arguments","length","undefined","now","performance","Math","max","min","playLaserHit","playBackgroundMusic","pauseBackgroundMusic","setMusicVolume","dispose","isAudioUnlocked","setupAudioUnlock","audioManager","unlockAudio","cleanup","window","removeEventListener","addEventListener"],"sources":["/Users/OCSAdmin/Projects/geminiTut/my-react-app/src/systems/audioManager.ts"],"sourcesContent":["/**\n * Audio Manager System\n * Handles all game sound effects and background music\n */\n\nimport {\n  BOUNCE_SOUND_PATH,\n  LASER_HIT_SOUND_PATH,\n  BACKGROUND_MUSIC_PATH,\n  BACKGROUND_MUSIC_VOLUME,\n  BOUNCE_DEBOUNCE_MS,\n} from '../config/gameConfig';\n\nexport class AudioManager {\n  private bounceSound: HTMLAudioElement | null = null;\n  private laserHitSound: HTMLAudioElement | null = null;\n  private backgroundMusic: HTMLAudioElement | null = null;\n  private lastBounceTime: number = 0;\n  private isUnlocked: boolean = false;\n  private hasPlayedJumpSound: boolean = false; // Track if jump sound played this press\n\n  /**\n   * Initialize audio system (must be called on user interaction)\n   */\n  initialize(): void {\n    if (this.isUnlocked) return;\n\n    console.log('üîä Initializing audio system...');\n\n    try {\n      // Create bounce sound\n      this.bounceSound = new Audio(BOUNCE_SOUND_PATH);\n      this.bounceSound.volume = 1;\n      this.bounceSound.load(); // Preload for Chrome\n\n      // Create laser hit sound\n      this.laserHitSound = new Audio(LASER_HIT_SOUND_PATH);\n      this.laserHitSound.volume = 1;\n      this.laserHitSound.load(); // Preload for Chrome\n\n      // Create background music\n      this.backgroundMusic = new Audio(BACKGROUND_MUSIC_PATH);\n      this.backgroundMusic.loop = true;\n      this.backgroundMusic.volume = BACKGROUND_MUSIC_VOLUME;\n      this.backgroundMusic.load(); // Preload for Chrome\n\n      // Start background music (Chrome may block)\n      this.backgroundMusic.play()\n        .then(() => console.log('üéµ Background music started'))\n        .catch((e) => console.warn('‚ö†Ô∏è Background music blocked:', e.message));\n\n      // Unlock bounce sound by playing and immediately pausing (Chrome requirement)\n      this.bounceSound.play()\n        .then(() => {\n          console.log('‚úÖ Bounce sound unlocked');\n          if (this.bounceSound) {\n            this.bounceSound.pause();\n            this.bounceSound.currentTime = 0;\n          }\n        })\n        .catch((e) => console.warn('‚ö†Ô∏è Bounce sound unlock failed:', e.message));\n\n      this.isUnlocked = true;\n      console.log('‚úÖ Audio system initialized');\n    } catch (error) {\n      console.error('‚ùå Audio initialization failed:', error);\n    }\n  }\n\n  /**\n   * Play jump sound (only once per button press)\n   */\n  playJumpSound(): void {\n    if (!this.bounceSound) {\n      console.warn('‚ö†Ô∏è Jump sound: No audio object');\n      return;\n    }\n    if (this.hasPlayedJumpSound) return; // Don't play again until released\n\n    this.bounceSound.currentTime = 0;\n    this.bounceSound.volume = 1;\n    this.bounceSound.play()\n      .then(() => console.log('üîä Jump sound played'))\n      .catch((e) => console.error('‚ùå Jump sound failed:', e.message));\n\n    this.hasPlayedJumpSound = true;\n  }\n\n  /**\n   * Reset jump sound flag (call when button is released)\n   */\n  resetJumpSound(): void {\n    this.hasPlayedJumpSound = false;\n  }\n\n  /**\n   * Play bounce sound with volume control (for landing)\n   */\n  playBounce(volume: number = 1): void {\n    if (!this.bounceSound) return;\n\n    const now = performance.now();\n\n    // Debounce rapid bounces\n    if (now - this.lastBounceTime < BOUNCE_DEBOUNCE_MS) {\n      return;\n    }\n\n    this.bounceSound.currentTime = 0;\n    this.bounceSound.volume = Math.max(0, Math.min(1, volume));\n    this.bounceSound.play().catch(() => {\n      // Playback might fail\n    });\n\n    this.lastBounceTime = now;\n  }\n\n  /**\n   * Play laser hit sound\n   */\n  playLaserHit(): void {\n    if (!this.laserHitSound) return;\n\n    this.laserHitSound.currentTime = 0;\n    this.laserHitSound.volume = 1;\n    this.laserHitSound.play().catch(() => {\n      // Playback might fail\n    });\n  }\n\n  /**\n   * Play background music\n   */\n  playBackgroundMusic(): void {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.play().catch(() => {\n      // Autoplay might be blocked\n    });\n  }\n\n  /**\n   * Pause background music\n   */\n  pauseBackgroundMusic(): void {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.pause();\n  }\n\n  /**\n   * Set background music volume\n   */\n  setMusicVolume(volume: number): void {\n    if (!this.backgroundMusic) return;\n    this.backgroundMusic.volume = Math.max(0, Math.min(1, volume));\n  }\n\n  /**\n   * Cleanup audio resources\n   */\n  dispose(): void {\n    if (this.bounceSound) {\n      this.bounceSound.pause();\n      this.bounceSound = null;\n    }\n    if (this.laserHitSound) {\n      this.laserHitSound.pause();\n      this.laserHitSound = null;\n    }\n    if (this.backgroundMusic) {\n      this.backgroundMusic.pause();\n      this.backgroundMusic = null;\n    }\n  }\n\n  /**\n   * Check if audio is unlocked\n   */\n  isAudioUnlocked(): boolean {\n    return this.isUnlocked;\n  }\n}\n\n/**\n * Hook for unlocking audio on first user interaction\n */\nexport const setupAudioUnlock = (audioManager: AudioManager): (() => void) => {\n  const unlockAudio = () => {\n    audioManager.initialize();\n    cleanup();\n  };\n\n  const cleanup = () => {\n    window.removeEventListener('click', unlockAudio);\n    window.removeEventListener('keydown', unlockAudio);\n    window.removeEventListener('touchstart', unlockAudio);\n  };\n\n  window.addEventListener('click', unlockAudio);\n  window.addEventListener('keydown', unlockAudio);\n  window.addEventListener('touchstart', unlockAudio);\n\n  return cleanup;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}